{"version":3,"sources":["actions/loginAction.js","Firebase.js","store.js","actions/deleteAction.js","actions/deleteSubmissionAction.js","actions/editAction.js","Rewrite.js","ArticleEditor.js","util/dateFormat.js","ArticleItem.js","Item.js","NewspaperItem.js","actions/forceClickAction.js","actions/toggleTourAction.js","OnboardingSteps.js","About.js","Login.js","Signup.js","actions/gotPostsAction.js","ItemList.js","util/sortHeadlines.js","util/sortStories.js","util/processStories.js","NewsHome.js","Newspaper.js","Welcome.js","FrozenNewspaper.js","Category.js","UserPage.js","NewPost.js","Detail.js","AdminVerifyStory.js","AdminPanel.js","TopBar.js","App.js","serviceWorker.js","index.js"],"names":["loginAction","user","type","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","yesterday","Date","setDate","getDate","getTime","Firebase","_this","this","Object","classCallCheck","createUser","email","pass","name","auth","createUserWithEmailAndPassword","then","res","updateProfile","displayName","login","signInAnonymously","admin","signInWithEmailAndPassword","getIdTokenResult","token","claims","console","log","logOut","signOut","resetPass","sendPasswordResetEmail","updatePass","newPass","currentUser","updatePassword","newArticle","title","url","source","newPost","db","ref","push","ts","firebase","database","ServerValue","TIMESTAMP","set","timestamp","newHeadline","storyID","headline","newHeadlineKey","key","uid","updates","username","votes","defineProperty","update","vote","headlineID","v","post","getFrozenStories","orderByChild","once","getFrozenStoryByID","postID","getTopPosts","getTodayPosts","cutoff","startAt","getSubmissionsByUser","getStoryByID","getRecentTweets","handle","num","params","functions","httpsCallable","deleteStory","getSubmissionsForPost","val","headlines","hl","clearToday","posts","keys","postIDs","Promise","all","map","app","initializeApp","unsub","onAuthStateChanged","result","store","dispatch","text","_this2","story_data","_this3","submissionID","userID","deleteOneHeadlineFromPosts","subID","p","slice","forEach","filter","createStore","state","action","objectSpread","data","show_tour","undefined","target","force_click","oldPost","newTitle","newURL","categories","deleteAction","deleteSubmissionAction","editAction","Rewrite","props","rw","canVote","canDelete","react_default","a","createElement","className","react_router_dom","to","score","react","buttons","Rewrite_DeleteHeadline","delete","bind","deleteSubmission","catch","err","onClick","React","Component","DeleteHeadline","_useState","useState","_useState2","slicedToArray","confirm","setConfirm","id","connect","ArticleEditor","possibleConstructorReturn","getPrototypeOf","call","article_text","event","setState","value","editArticle","saveArticle","onChange","change","submit","save","dateFormat","date","getMonth","getFullYear","ArticleItem","unFreezeStory","history","best","original","content","split","paragraph","uuid","v4","href","ArticleItem_UnFreeze","f","unfreeze","ArticleItem_UnSave","unsave","UnSave","UnFreeze","_useState3","_useState4","withRouter","Item","show","newkey","newhl","concat","i","length","temp","values","reduce","cur","deleteSuccess","freezeStory","_this4","_this5","frozen","article_saved","src_ArticleItem","src_Rewrite","Item_NewSubmission","Item_DeleteStory","Item_Freeze","freeze","Item_UnFreeze","src_ArticleEditor","Freeze","DeleteStory","_useState5","_useState6","NewSubmission","_useState7","_useState8","inEdit","setInEdit","Item_Editor","cancel","Editor","text_ref","createRef","style","width","height","current","deleteSubmissionSuccess","editSuccess","NewspaperItem","hovering","big","tour","num_headlines","css_class","click","src_Item","hide","below_content","below_text","substring","onTouchStart","mouseEnter","onTouchEnd","mouseLeave","onMouseEnter","onMouseLeave","forceClickAction","toggleTourAction","OnboardingSteps","stepindex","loading","run","steps","placement","disableBeacon","zIndex","styles","options","overlayColor","spotlightShadow","spotlight","backgroundColor","index","status","EVENTS","STEP_AFTER","ACTIONS","NEXT","CLOSE","PREV","STATUS","FINISHED","SKIPPED","includes","toggle_tour","setTimeout","TARGET_NOT_FOUND","TOOLTIP_CLOSE","Fragment","react_joyride_es","callback","handleCallback","stepIndex","continuous","showProgress","primaryColor","textColor","tooltip","padding","tooltipContent","showSkipButton","About","expand","setLogin","src_NewspaperItem","dummy_1","dummy_2","dummy_4","toggle","dummy_3","guestLogin","Dt0zmo7rdKTYQteiMmJ46KgI7vB2","eN7piCRiXON5xRt7SCVHGqAngBP2","fRx1U5clgEddY9fscGwjzYEzgmf1","C53ykWdF7vQMwh3d3N1JwFzOVBg2","LyRx7aPivSYx7m7c9QeIxXZ4HCw2","b5A1zyXxIfWZD3GUQcmb1yJlYzD3","LoginForm","error","preventDefault","welcome","onSubmit","message","Connected","Login","SignupForm","authUser","SignupPage","gotPostsAction","ItemList","items","item","sortHeadlines","submissions","sort","b","sortStories","stories","story","total","processStories","story_results","success","NewsHome","gotPosts","src_ItemList","Newspaper","setTour","close","color","border","fontSize","cursor","borderRadius","FrozenNewspaper","closeWelcome","src_Welcome","Category","show_category","UserPage","active","match","story_keys","k","active_promises","frozen_promises","NewPost","ev","placeholder","Detail","subs","AdminVerifyStory","guess_url","guess_text","source_name","autoComplete","full","spellCheck","category","Status","TweetPreview","tweet","cat","AdminPanel","tweets","to_submit","submitting","favorite_count","t1","t2","window","t","fetchTweets","e","margin","AdminPanel_TweetPreview","killDB","src_AdminVerifyStory","full_text","src_NewPost","fetchCustomTweets","handleChange","TopBar","doLogout","src_OnboardingSteps","react_router","exact","path","component","Signup","ownProps","disp","App","src_TopBar","Boolean","location","hostname","ReactDOM","render","es","configureStore","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.915a9e61.chunk.js","sourcesContent":["let loginAction = (user) => ({type: 'LOGIN_ACTION', user: user});\n\nexport default loginAction;\n","import app from 'firebase/app';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\nimport 'firebase/functions';\nimport store from './store';\nimport loginAction from './actions/loginAction';\nimport uuid from 'uuid';\n\n  var firebaseConfig = {\n    apiKey: \"AIzaSyD9hWSw27OO_qk9eRKm2TMJ_09JcdeZdm8\",\n    authDomain: \"bottomshelfnews.firebaseapp.com\",\n    databaseURL: \"https://bottomshelfnews.firebaseio.com\",\n    projectId: \"bottomshelfnews\",\n    storageBucket: \"\",\n    messagingSenderId: \"924993359943\",\n    appId: \"1:924993359943:web:99b6abdc71d38c4316e162\",\n    measurementId: \"G-LRJS1QWZZR\"\n  };\n\nlet date = () => (new Date()).toJSON().slice(0,10);\n\n// 'production' means demo on bottonshelfnews.github.io, frozen to Jan 8th\nif (process.env.NODE_ENV === 'production') {\n\tdate = () => \"2020-01-08\";\n}\nlet yesterday = () => (new Date(new Date().setDate(new Date().getDate()-1))).getTime();\n\nclass Firebase {\n\t// onAuthStateChange is a funciton called whenever a successful login/out occurs\n\tconstructor() {\n\t\tapp.initializeApp(firebaseConfig);\n\t\tthis.auth = app.auth();\n\t\tthis.db = app.database();\n\t\tthis.functions = app.functions();\n\t\t// handle user being already logged in\n\t\tthis.unsub = this.auth.onAuthStateChanged(user=>{\n\t\t\tif (user) {\n\t\t\t\tuser.getIdTokenResult().then(result=>{\n\t\t\t\t\tuser.admin = !!result.claims.admin; // set user.admin property for easier access\n\t\t\t\t\tstore.dispatch(loginAction(user));\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.unsub(); //unsubscribe to auth change - only want this to run once \n\t\t});\n\t}\n\temail() {\n\t\treturn this.auth.currentUser ? this.auth.currentUser.email : null;\n\t}\n\n\tcreateUser = (email, pass, name) => {\n\t\treturn this.auth.createUserWithEmailAndPassword(email,pass)\n\t\t.then(res=> res.user.updateProfile({displayName:name}));\n\t}\n\n\tlogin = (email, pass)=> {\n\t\tif (!email || !pass) {\n\t\t\treturn this.auth.signInAnonymously()\n\t\t\t.then(res=>res.user)\n\t\t\t.then(user=>{\n\t\t\t\tuser.admin=false;\n\t\t\t\treturn user;\n\t\t\t});\n\t\t}\n\t\tlet user = null;\n\t\treturn this.auth.signInWithEmailAndPassword(email, pass)\n\t\t.then(res=>{\n\t\t\tuser = res.user;\n\t\t\treturn user.getIdTokenResult();\n\t\t})\n\t\t.then(token=>{\n\t\t\tuser.admin = token.claims.admin;\n\t\t\tconsole.log(user);\n\t\t\treturn user;\n\t\t});\n\t}\n\n\tlogOut = ()=> {\n\t\treturn this.auth.signOut();\n\t}\n\n\tresetPass = (email) => {\n\t\treturn this.auth.sendPasswordResetEmail(email);\n\t}\n\n\tupdatePass = (newPass) => {\n\t    return this.auth.currentUser.updatePassword(newPass);\n\t}\n\n\tsaveArticle(storyID, text) {\n\t\tlet updates = {};\n\t\tupdates['frozen/' + storyID + '/article_text'] = text;\n\t\tupdates['frozen/' + storyID + '/article_saved'] = true;\n\t\treturn this.db.ref().update(updates);\n\t}\n\n\teditArticle(storyID, text) {\n\t\tlet updates = {};\n\t\tupdates['frozen/' + storyID + '/article_text'] = text;\n\t\tupdates['frozen/' + storyID + '/article_saved'] = null;\n\t\treturn this.db.ref().update(updates);\n\t}\n\t\n\tfreezeStory(storyID) {\n\t\tlet story = this.db.ref('stories/' + storyID);\n\t\treturn story.once('value')\n\t\t.then(res=>res.val())\n\t\t.then(story_data=>{\n\t\t\tif (!story_data) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tstory_data['frozen'] = true;\n\t\t\tlet updates = {};\n\t\t\tupdates['/stories/' + storyID] = null;\n\t\t\tupdates['/frozen/' + storyID] = story_data;\n\t\t\tlet headlines = story_data.headlines || {};\n\t\t\tfor (var key in headlines) {\n\t\t\t\tlet uid = headlines[key].user;\n\t\t\t\tupdates['/users/' + uid + '/stories/' + storyID + '/status'] = 'frozen';\n\t\t\t}\n\t\t\treturn this.db.ref().update(updates);\n\t\t})\n\t}\n\tunFreezeStory(storyID) {\n\t\tconsole.log('unfreeze');\n\t\tconsole.log(storyID);\n\t\tlet frozen_story = this.db.ref('frozen/' + storyID);\n\t\treturn frozen_story.once('value')\n\t\t.then(res=>res.val())\n\t\t.then(story_data=>{\n\t\t\tif (!story_data) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tstory_data['frozen'] = null;\n\t\t\tlet updates = {};\n\t\t\tupdates['/frozen/' + storyID] = null;\n\t\t\tupdates['/stories/' + storyID] = story_data;\n\t\t\tlet headlines = story_data.headlines || {};\n\t\t\tfor (var key in headlines) {\n\t\t\t\tlet uid = headlines[key].user;\n\t\t\t\tupdates['/users/' + uid + '/stories/' + storyID + '/status'] = 'active';\n\t\t\t}\n\t\t\treturn this.db.ref().update(updates);\n\t\t})\n\t}\n\t//TODO get rid of old\n\tnewArticle = (title,url,source) => {\n\t\tif (!this.auth.currentUser) return; //should not happen\n\t\tlet posts = this.db.ref(\"stories\");\n\t\tlet newPost = posts.push();\n\t\tlet ts = firebase.database.ServerValue.TIMESTAMP;\n\t\treturn newPost.set( {\n\t\t\ttitle:title,\n\t\t\turl:url,\n\t\t\tsource:source,\n\t\t\ttimestamp: ts\n\t\t});\n\t}\n\n\tnewHeadline = (storyID,headline) => {\n\t\tif (!this.auth.currentUser) return; //should not happen\n\t\tlet post = this.db.ref(\"stories/\" + storyID + '/headlines');\n\t\tlet newHeadlineKey = post.push().key;\n\t\tlet uid = this.auth.currentUser.uid;\n\t\tlet name = this.auth.currentUser.displayName;\n\t\tlet updates = {};\n\t\tlet ts = firebase.database.ServerValue.TIMESTAMP;\n\n\t\t// Logging user's vote in 2 places: /submissions and /users \n\n\t\tupdates['/stories/' + storyID + '/headlines/' + newHeadlineKey] =\n\t\t\t{headline:headline, user:uid, username:name, votes: {[uid]:true}, key:newHeadlineKey, timestamp:ts};\n\n\t\t\t\n\t\tupdates['/users/' + uid + '/stories/' + storyID + '/submissions/' + newHeadlineKey ] = true;\n\t\tupdates['/users/' + uid + '/stories/' + storyID + '/status'] = 'active';\n\t\tconsole.log(updates);\n\t\tthis.db.ref().update(updates);\n\t\treturn newHeadlineKey;\n\t}\n\n\t// v can be true, false or null\n\tvote = (storyID, headlineID, v) => {\n\t\tif (!this.auth.currentUser) return; //should not happen\n\t\t//console.log(this.auth.currentUser, postID, headlineID);\n\t\tlet post = this.db.ref(\"/stories/\" + storyID + \"/headlines/\" + headlineID + \"/votes\");\n\t\tlet uid = this.auth.currentUser.uid;\n\t\tpost.update({[uid]:v});\n\t}\n\n\tgetFrozenStories = () => {\n\t\t/* TODO: Filter to most recent 10ish? */\n\t\tlet stories = this.db.ref('frozen')\n\t\t.orderByChild('timestamp')\n\t\t.once('value');\n\t\treturn stories;\n\t}\n\n\tgetFrozenStoryByID = (postID) => {\n\t\t// Get a list of {postID:subID} for all user submissions\n\t\treturn this.db.ref('/frozen/' + postID).once('value');\n\t}\n\n\tgetTopPosts = () => {\n\t\t/* TODO: Filter to most recent 10ish? */\n\t\tlet stories = this.db.ref('stories')\n\t\t.orderByChild('timestamp')\n\t\t.once('value');\n\t\treturn stories;\n\t}\n\n\tgetTodayPosts = () => {\n\t\tlet cutoff = yesterday();\n\t\tlet stories = this.db.ref('stories')\n\t\t.orderByChild('timestamp')\n\t\t.startAt(cutoff)\n\t\t.once('value');\n\t\treturn stories;\n\t}\n\n\t//TODO IMPORTANT: When updated to use num, no num arg = all subs\n\tgetSubmissionsForPost(storyID, num) {\n\t\treturn this.db.ref('stories/' + storyID + '/headlines/').once('value');\n\t}\n\n\tgetSubmissionsByUser = (uid) => {\n\t\t// Get a list of {postID:subID} for all user submissions\n\t\treturn this.db.ref('users/' + uid).orderByChild('timestamp').once('value');\n\t}\n\n\tgetStoryByID = (postID) => {\n\t\t// Get a list of {postID:subID} for all user submissions\n\t\treturn this.db.ref('/stories/' + postID).once('value');\n\t}\n\n\t// TODO num is not implemented on server, fetches 50(?) by default\n\tgetRecentTweets = (handle, num) => {\n\t\tlet params = {handle:handle};\n\t\treturn this.functions.httpsCallable('topNews')(params);\n\t}\n\n\t// this deletes a story including all associated headline submissions\n\tdeleteStory = (storyID) => {\n\t\tlet updates = {};\n\t\tupdates['stories/' + storyID] = null;\n\t\tconsole.log(updates);\n\t\treturn this.getSubmissionsForPost(storyID)\n\t\t.then(res=>res.val())\n\t\t.then(headlines => {\n\t\t\tfor (var hl in headlines){\n\t\t\t\tlet user = headlines[hl].user;\n\t\t\t\tupdates['users/' + user + '/stories/' + storyID] = null;\t\n\t\t\t}\n\t\t\tconsole.log(updates);\n\t\t\treturn this.db.ref().update(updates);\n\t\t});\n\t}\n\n\tdeleteSubmission(storyID, submissionID, userID) {\n\t\tlet updates = {};\n\t\tupdates['users/' + userID + '/stories/' + storyID+'/submissions/' + submissionID] = null;\n\t\tupdates['stories/' + storyID + '/headlines/' + submissionID] = null;\n\t\tconsole.log(updates);\n\t\treturn this.db.ref().update(updates);\n\t}\n\n\t// this deletes everything added to the database today\n\tclearToday = () => {\n\t\treturn this.getTopPosts()\n\t\t.then(res=>res.val())\n\t\t.then(res=>{\n\t\t\tconsole.log(res);return res;\n\t\t})\n\t\t.then(posts=>Object.keys(posts || {}))\n\t\t.then(postIDs=>  Promise.all(postIDs.map(this.deleteStory)));\n\t}\n}\n\nexport default Firebase;","import { createStore } from 'redux';\nimport Firebase from './Firebase';\n\nfunction mainReducer(state, action) {\n\tswitch (action.type) {\n\t\tcase 'LOGIN_ACTION':\n\t\t\treturn {...state, user:action.user};\n\t\tcase 'LOGOUT_ACTION':\n\t\t\treturn {...state, user:null, userID:null};\n\t\tcase 'GOT_POSTS_ACTION':\n\t\t\treturn {...state, posts:action.data};\n\t\tcase 'DELETE_SUBMISSION_ACTION':\n\t\t\treturn {...state, posts: deleteOneHeadlineFromPosts(state.posts,action.postID, action.subID)};\n\t\tcase 'DELETE_ACTION':\n\t\t\treturn {...state, posts: state.posts.filter(post=>post.postID!==action.postID)};\n\t\tcase 'TOGGLE_TOUR_ACTION':\n\t\t\treturn {...state, show_tour: (!state.show_tour) };\n\t\tcase 'FORCE_CLICK_ACTION':\n\t\t\tif (!(action.target===undefined)) {\n\t\t\t\treturn {...state, force_click:action.target};\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn {...state, force_click:(!state.force_click)};\n\t\t\t}\n\t\tcase 'EDIT_ACTION':\n\t\t\tconsole.log(state);\n\t\t\treturn {...state, posts: state.posts.map(oldPost => \n\t\t\t\toldPost.postID!==action.postID ? oldPost \n\t\t\t\t : {...oldPost, title:action.newTitle, url:action.newURL}\n\t\t\t)};\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n// TODO: move this to another file, try to do without mutations? \n// we have to copy the posts array, returning the same object does not force a state change\nlet deleteOneHeadlineFromPosts = (posts, postID, subID) => {\n\tlet p = posts.slice();\n\tp.forEach(post=>{\n\t\tif (post.postID===postID) {\n\t\t\tconsole.log(post.headlines);\n\t\t\tpost.headlines=post.headlines.filter(hl=>hl.key!==subID);\n\t\t\tconsole.log(post.headlines);\n\t\t}\n\t});\n\treturn p;\n}\nfunction defaultState() {\n\treturn {\n\t\tuser: null,\n\t\tshow_tour:false,\n\t\tforce_click:false,\n\t\tposts:[],\n\t\tfirebase: new Firebase(),\n\t\tcategories: ['general','sports','politics']\n\t}\n}\nexport default createStore(\n  mainReducer,\n  defaultState()\n );\n\n","let deleteAction = (postID) => ({type: 'DELETE_ACTION', postID: postID});\n\nexport default deleteAction;\n","let deleteSubmissionAction = (postID, subID) => ({type: 'DELETE_SUBMISSION_ACTION', postID: postID, subID:subID});\n\nexport default deleteSubmissionAction;\n","let editAction = (postID,title,url) => (\n\t{\n\t\ttype: 'EDIT_ACTION', \n\t\tpostID: postID, \n\t\tnewTitle:title, \n\t\tnewURL:url\n\t}\n);\n\nexport default editAction;","import React, {useState} from \"react\";\nimport {Fragment} from 'react';\nimport {connect} from \"react-redux\";\nimport {Link} from \"react-router-dom\";\nclass Rewrite extends React.Component {\n\trender() {\n\t\t\n\t\tlet canVote = !!this.props.user;\n\n\t\tlet vote = 0;\n\t\tif (canVote && this.props.rw.votes[this.props.user.uid] === true) {\n\t\t\tvote = 1;\n\t\t}\n\t\telse if (canVote && this.props.rw.votes[this.props.user.uid] === false){\n\t\t\tvote = -1;\n\t\t}\n\n\t\tlet canDelete = canVote && this.props.user.uid===this.props.rw.user;\n\n\t\treturn (\n\t\t\t<section className=\"submission main\">\n\t\t\t\t\t<p>{this.props.rw.headline}</p>\n\t\t\t\t\t<div className=\"bottomBar\">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t  \t\t<Link to={'/user/'+this.props.rw.user}>{this.props.rw.username || \"anon\"}</Link>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t&#8226;\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{this.props.rw.score + \" points\"}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t    {canVote &&\n\t\t\t\t\t    \t<Fragment>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t&#8226;\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{this.buttons(vote)}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t    }\n\t\t\t\t\t    {canDelete &&\n\t\t\t\t\t    \t<Fragment>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t&#8226;\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t    \t\t\t<DeleteHeadline delete={this.delete.bind(this)} />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t    \t</Fragment>\n\t\t\t\t\t    }\n\t\t\t\t\t</div>\n\t\t\t</section>);\n\t}\n\tdelete() {\n\t\tthis.props.firebase.deleteSubmission(this.props.postID, this.props.rw.key, this.props.rw.user)\n\t\t.then(res=>{\n\t\t\tthis.props.delete(this.props.rw.key);\n\t\t})\n\t\t.catch(err=>console.log('error:' + err));\n\t}\n\tbuttons(vote) {\n\t\tif (vote===0) {\n\t\t\treturn (\n\t\t\t<span>\t\n\t\t\t\t<button onClick={()=>this.vote(true)} className='vote-button'>+</button>\n\t\t\t\t<button onClick={()=>this.vote(false)} className='vote-button'>-</button>\n\t\t\t</span>);\n\t\t}\t\n\t\telse if (vote===1) {\n\t\t\treturn (\n\t\t\t<span>\t\n\t\t\t\t<button onClick={()=>this.vote(null)} className='vote-button voted' >+</button>\n\t\t\t\t<button onClick={()=>this.vote(false)} className='vote-button'>-</button>\n\t\t\t</span>);\n\t\t}\n\t\telse {\n\t\t\treturn (\n\t\t\t<span>\t\n\t\t\t\t<button onClick={()=>this.vote(true)} className='vote-button'>+</button>\n\t\t\t\t<button onClick={()=>this.vote(null)} className='vote-button voted'>-</button>\n\t\t\t</span>);\n\t\t}\n\t}\n\tvote = (v) => {\n\t\tthis.props.firebase.vote(this.props.postID, this.props.rw.key, v);\n\t\tthis.props.vote(v)\n\t}\n}\n\nlet DeleteHeadline = (props) => {\n  let [confirm, setConfirm] = useState(false);\n  return confirm? \n          <Fragment>\n          <button type='button' onClick={()=>props.delete(props.id)}>Confirm</button>\n          <button type='button' onClick={()=>setConfirm(false)}>Cancel</button>\n          </Fragment>\n        : <button type='button' onClick={()=>setConfirm(true)}>Delete</button>;\n}\nlet mstp = state=>({\n\tfirebase:state.firebase, \n\tuser: state.user\n});\n\nexport default connect(mstp)(Rewrite);\n","import React from 'react';\nimport {connect} from 'react-redux';\nclass ArticleEditor extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {text:this.props.post.article_text || \"\"};\n\t}\t\n\n\tchange(event) {\n\t\tthis.setState({text:event.target.value});\n\t}\n\n\tsubmit() {\n\t\tthis.props.firebase.editArticle(this.props.post.postID, this.state.text);\n\t}\n\n\tsave() {\n\t\tthis.props.firebase.saveArticle(this.props.post.postID, this.state.text);\n\t}\n\n\trender() {\n\treturn (<div>\n\t\t<div>\n\t\t\t<textarea className='article_editor' value={this.state.text} onChange={this.change.bind(this)} />\n\t\t</div>\n\t\t<div>\n\t\t\t<button type='button' onClick={this.submit.bind(this)}> submit </button>\n\t\t\t<button type='button' onClick={this.save.bind(this)}> save </button>\n\t\t</div>\n\t</div>);\n\t}\n}\nlet mstp = state => {\n\treturn {firebase:state.firebase}\n}\nexport default connect(mstp)(ArticleEditor);","let dateFormat=(date)=>{\n\tlet monthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\",\"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\treturn  date.getDate() + \" \" + monthNames[date.getMonth()] + \" \" + date.getFullYear();\n}\nexport default dateFormat;\n","import React, {useState} from 'react';\nimport {connect} from 'react-redux';\nimport dateFormat from './util/dateFormat';\nimport {withRouter, Link} from 'react-router-dom';\nimport uuid from 'uuid';\nclass ArticleItem  extends React.Component{\n\tconstructor(props) {\n\t\tsuper(props);\n\t}\n\tunfreeze(postID) {\n\t    this.props.firebase.unFreezeStory(postID)\n\t    .then(res=>{\n\t      this.props.history.push('/');\n\t    });\n\t}\n\t//hacky - we 'edit' the post without changing text\n\tunsave(postID) {\n\t\tthis.props.firebase.editArticle(this.props.post.postID, this.props.post.article_text)\n\t\t.then(res=>{\n\t      this.props.history.push('/');\n\t\t})\n\t}\n\trender() {\n\t\tlet best = this.props.post.headlines[0].headline;\n\t\tlet original = this.props.post.title;\n\t\tlet url = this.props.post.url;\n\t\tlet source = this.props.post.source;\n\n\t\tlet content = this.props.post.article_text\n\t\t.split('\\n')\n\t\t.map(paragraph=>\n\t\t\t<p className='news_article_section' key={uuid.v4()}>{paragraph}</p>\n\t\t);\n\n\t    return (\n\t        <div className=\"itemcontainer\">\n\t          <section className=\"date_above\">{dateFormat(new Date(this.props.post.timestamp))}</section>\n\n\t          <section className=\"article_headline\">\n\t              <p>\n\t              \t{best}\n\t              </p>\n\t          </section>\n\n\n\t          <article className='news_article'>\n\t          \t{content}\n\t          </article>\n\t          <div className=\"article_byline\">\n\t\t\t\t\t<a href={url}><span className='code'>{source + \":\"}</span>{original}</a>\n\t          </div>\n\t          {this.props.user && this.props.user.admin && \n\t              <UnFreeze id={this.props.post.postID} f={this.unfreeze.bind(this)} />\n\t          }\n\t          {this.props.user && this.props.user.admin && \n\t              <UnSave id={this.props.post.postID} f={this.unsave.bind(this)} />\n\t          }\n\t      </div>\n\t     );\n\t}\n}\nlet UnSave = (props) => {\n  let [confirm, setConfirm] = useState(false);\n  return (\n    <div>\n      {\n        confirm? \n          <div>\n          <button type='button' onClick={()=>props.f(props.id)}>Confirm</button>\n          <button type='button' onClick={()=>setConfirm(false)}>Cancel</button>\n          </div>\n        : <button type='button' onClick={()=>setConfirm(true)}>UnSave</button>\n      }\n    </div>\n  )\n}\nlet UnFreeze = (props) => {\n  let [confirm, setConfirm] = useState(false);\n  return (\n    <div>\n      {\n        confirm? \n          <div>\n          <button type='button' onClick={()=>props.f(props.id)}>Confirm</button>\n          <button type='button' onClick={()=>setConfirm(false)}>Cancel</button>\n          </div>\n        : <button type='button' onClick={()=>setConfirm(true)}>UnFreeze</button>\n      }\n    </div>\n  )\n}\nlet mstp = state=>({firebase:state.firebase, user:state.user});\nexport default withRouter(connect(mstp)(ArticleItem));","import React, {useState} from \"react\";\nimport {connect} from \"react-redux\";\nimport {Link, withRouter} from 'react-router-dom';\nimport deleteAction from './actions/deleteAction';\nimport deleteSubmissionAction from './actions/deleteSubmissionAction';\nimport editAction from './actions/editAction';\nimport Rewrite from './Rewrite';\nimport ArticleEditor from './ArticleEditor';\nimport ArticleItem from './ArticleItem';\nimport dateFormat from './util/dateFormat';\nimport uuid from 'uuid';\n\n/* TODO \nThis will display a different thing depending on if it's frozen.\nIf frozen, admin can edit the article text. \nWith an article, shows it.\nWithout, normal. \nThat way, <Item> and its containers can be the view\nfor both the in-edit and completed parts of the site */\n\nclass Item extends React.Component {\n  constructor(props) {\n    super(props);\n    let headlines = [];\n    if (this.props.post.headlines) {\n      headlines = this.props.post.headlines.slice(0,this.props.show);\n    }\n    this.state = {headlines:headlines}\n  }\n\n  submit(title) {\n    if (!title) return;\n    let newkey = this.props.firebase.newHeadline(this.props.post.postID, title);\n    let newhl = {headline:title, \n                 user:this.props.user.uid, \n                 username:this.props.user.displayName, \n                 key:newkey,\n                 score:1,\n                 votes: {[this.props.user.uid]:true}};\n    this.setState({headlines:this.state.headlines.concat([newhl])});\n  }\n\n  vote(headlineID, v) {\n    let newhl = this.state.headlines.slice(0);\n    for (var i=0; i<this.state.headlines.length; i++) {\n      if (this.state.headlines[i].key === headlineID) {\n        let temp = this.state.headlines[i];\n        temp.votes[this.props.user.uid] = v;\n        let reducer = (score, cur)=> score + (cur===true?1:(cur===false?-1:0));\n        let score = Object.values(temp.votes).reduce(reducer,0);\n        temp.score=score;\n        newhl[i] = temp;\n      }\n    }\n    this.setState({headlines:newhl});\n  }\n  delete(postID) {\n    this.props.firebase.deleteStory(postID)\n    .then(()=>{\n      this.props.deleteSuccess(postID);\n      this.props.history.push('/news');\n    });\n  }\n  deleteSubmission(subID) {\n    this.setState({headlines: this.state.headlines.filter(hl=>hl.key!==subID)});\n  }\n  freeze(postID) {\n    this.props.firebase.freezeStory(postID)\n    .then(res=>{\n      this.props.history.push('/');\n    });\n  } \n  unfreeze(postID) {\n    this.props.firebase.unFreezeStory(postID)\n    .then(res=>{\n      this.props.history.push('/');\n    });\n  } \n  render() {\n    if (this.props.post.frozen && this.props.post.article_saved) {\n      return <ArticleItem post={this.props.post} />\n    }\n    return (\n        <div className=\"itemcontainer\">\n          <section className=\"date_above\">{dateFormat(new Date(this.props.post.timestamp))}</section>\n\n          <section className=\"original main\">\n              <p>\n                <Link to={'/detail/' + this.props.post.postID}> {this.props.post.title} </Link>\n              </p>\n          </section>\n\n          <div className=\"right\">\n            <a href={this.props.post.url}>{this.props.post.source || \"unknown\"} &#8599;</a>\n          </div>\n\n          {this.state.headlines.map(headline =>\n              <Rewrite\n                key={uuid.v4()}\n                className=\"best-rewrite\" \n                postID={this.props.post.postID} \n                rw={headline}\n                vote={this.vote.bind(this, headline.key) }\n                delete={this.deleteSubmission.bind(this)}\n              />\n            )  }\n\n          <section className=\"itembuttons\"> \n            {this.props.user && \n              <NewSubmission submit={this.submit.bind(this)}/>  }\n            {this.props.user && this.props.user.admin && \n              <DeleteStory id={this.props.post.postID} delete={this.delete.bind(this)} /> }\n            {this.props.user &&  this.props.user.admin && !this.props.post.frozen &&\n              <Freeze id={this.props.post.postID} f={this.freeze.bind(this)} /> }\n            {this.props.user &&  this.props.user.admin && this.props.post.frozen &&\n              <UnFreeze id={this.props.post.postID} f={this.unfreeze.bind(this)} /> }\n            {this.props.user &&  this.props.user.admin && this.props.post.frozen &&\n              <ArticleEditor post={this.props.post} /> }\n          </section> \n      </div>\n     );\n  }\n}\nlet UnFreeze = (props) => {\n  let [confirm, setConfirm] = useState(false);\n  return (\n    <div>\n      {\n        confirm? \n          <div>\n          <button type='button' onClick={()=>props.f(props.id)}>Confirm</button>\n          <button type='button' onClick={()=>setConfirm(false)}>Cancel</button>\n          </div>\n        : <button type='button' onClick={()=>setConfirm(true)}>UnFreeze</button>\n      }\n    </div>\n  )\n}\nlet Freeze = (props) => {\n  let [confirm, setConfirm] = useState(false);\n  return (\n    <div>\n      {\n        confirm? \n          <div>\n          <button type='button' onClick={()=>props.f(props.id)}>Confirm</button>\n          <button type='button' onClick={()=>setConfirm(false)}>Cancel</button>\n          </div>\n        : <button type='button' onClick={()=>setConfirm(true)}>Freeze</button>\n      }\n    </div>\n  )\n}\n\nlet DeleteStory = (props) => {\n  let [confirm, setConfirm] = useState(false);\n  return (\n    <div>\n      {\n        confirm? \n          <div>\n          <button type='button' onClick={()=>props.delete(props.id)}>Confirm</button>\n          <button type='button' onClick={()=>setConfirm(false)}>Cancel</button>\n          </div>\n        : <button type='button' onClick={()=>setConfirm(true)}>Delete Story</button>\n      }\n    </div>\n  )\n}\n\nlet NewSubmission = (props) => {\n  let [inEdit, setInEdit] = useState(false);\n  return (\n    <div>\n      {\n        inEdit? <Editor submit={props.submit} cancel={()=>setInEdit(false)} /> \n        : <button onClick={()=>setInEdit(true)}>New Submission</button>\n      }\n    </div>\n  )\n}\n\nlet Editor = props=> {\n  let text_ref = React.createRef();\n  return (\n      <div>\n        <fieldset>\n          <textarea ref={text_ref} name='title' style={{width:'80%', height: '2em'}} />\n        </fieldset>\n        <button onClick={()=>{props.submit(text_ref.current.value);props.cancel();}}>Submit</button>\n        <button onClick={props.cancel}>Cancel</button>\n      </div>\n    );\n}\n\nlet mstp = state=>({\n  firebase:state.firebase,\n  user: state.user,\n});\nlet mdtp = dispatch =>({\n  deleteSuccess: (id)=> dispatch(deleteAction(id)),\n  deleteSubmissionSuccess: (storyID, submissionID)=> dispatch(deleteSubmissionAction(storyID, submissionID)),\n  editSuccess: (id,title,url)=>dispatch(editAction(id,title,url))\n});\nexport default withRouter(connect(mstp,mdtp)(Item));","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport Item from './Item';\nimport {connect} from 'react-redux';\nimport dateFormat from './util/dateFormat';\nimport {withRouter} from 'react-router-dom';\n/* \nThe core purpose of this class is to display a news article \nin newspaper format, to a reader.\nBy default this only shows top headline. \nOn hover, will maybe show original title\nOn click, will be centered in page and show\nthe original and several top headlines.\n\nThis should default to original if no submissions, and \ntitles without submissions should be highlighted.\n*/\nclass NewspaperItem extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\t/*\n\t\tif (props.num==0) this.state={hovering:false, big:true};\n\t\telse this.state={hovering:false, big:false}; \n\t\t*/\n\t\tthis.state={hovering:false, big:false};\n\t}\n\tmouseEnter(){\n\t\tif (this.props.tour) return;\n\t\tthis.setState({hovering:true});\n\t}\n\tmouseLeave(){\n\t\tif (this.props.tour) return;\n\t\tthis.setState({hovering:false});\n\t}\n\tclick() {\n\t\tconsole.log('hi?');\n\t\tif (this.props.tour) return;\n\t\tthis.setState({big:!this.state.big});\n\t}\n\trender() {\n\t\tlet hovering = this.state.hovering;\n\t\tif (this.props.tour){\n\t\t\thovering = this.props.num==0;\n\t\t}\n\t\tif (this.state.big) {\n\t\t}\n\t\tlet date = dateFormat(new Date(this.props.post.timestamp));\n\t\tlet num_headlines = this.props.post.headlines.length;\n\t\tlet best = null;\n\t\tlet remaining = null;\n\t\tif (num_headlines>0){\n\t\t\tbest = this.props.post.headlines[0];\n\t\t\tremaining = this.props.post.headlines.slice(1);\n\t\t}\n\t\tlet css_class = \"article \";\n\t\tif (this.props.num<5) {\n\t\t\tcss_class += 'article'+(this.props.num + 1);\n\t\t}\n\t\telse {\n\t\t\tcss_class += 'articleN';\n\t\t}\n\n\t\tlet force_clicked = this.props.force_click && this.props.num==0;\n\t\tif (force_clicked) {\n\t\t\treturn (\n\t\t\t \t<div> \n\t\t\t        <div className=\"blocker\" onClick={this.click.bind(this)}></div>\n\t\t\t        <div className=\"big\" >\n\t\t\t\t         <Item \n\t\t\t\t            post = {this.props.post}\n\t\t\t\t            show={4}\n\t\t\t\t         />\n\t\t\t\t \t</div>\n\t\t\t \t</div>);\n\t\t}\t\n\t\t// display Item instead of NewspaperItem\n\t\telse if (this.state.big) {\n\t\t\treturn (\n\t\t\t \t<div> \n\t\t\t        <div className=\"blocker\" onClick={this.click.bind(this)}></div>\n\t\t\t        <div className=\"big\" >\n\t\t\t\t         <Item \n\t\t\t\t            post = {this.props.post}\n\t\t\t\t            show={4}\n\t\t\t\t         />\n\t\t\t\t \t</div>\n\t\t\t \t</div>);\n\t\t}\t\n\t\t/*\n\t\t We show more detail if hovering \n\t\tAll detail elements are in the DOM as visibility:hidden otherwise, \n\t\tso the grid container is fixed size.\n\n\t\tTODO: Mobile tap should show this, second tap = desktop click \n\t\tTODO: Just set hide variable and remove if */\n\t\tlet hide = \"hide\";\n\t\tif (num_headlines<1) {\n\t\t\thide=\"dim\";\n\t\t}\n\t\tif (hovering) {\n\t\t\thide=\"\";\n\t\t}\n\t\tlet below_content = null;\n\n\n\t\t//TODO this should check for completeed, not just frozen, articles.\n\t\tif (this.props.post.frozen) {\n\t\t\tlet below_text = this.props.post.article_text;\n\t\t\tif(!below_text) {\n\t\t\t\tbelow_text = '';\n\t\t\t}\n\t\t\tif (below_text.length > 100){\n\t\t\t\tbelow_text = below_text.substring(0,100) + \"...\";\n\t\t\t}\n\t\t\tbelow_content = \n\t\t\t\t<h3 className={\"article_below_medium \" + hide}> \n\t\t\t\t\t{below_text}\n\t\t\t\t</h3>;\n\t\t}\n\t\telse {\n\t\t\tbelow_content = \n\t\t\t\t<h3 className={\"article_below_medium \" + hide}> \n\t \t\t\t\t<span className=\"code\">\n\t \t\t\t\t\t<a href={this.props.post.url}>{this.props.post.source }</a>:  \n\t \t\t\t\t</span>\n\t \t\t\t\t{this.props.post.title}\n\t\t\t\t</h3>;\n\t\t}\n\n\n\t\treturn (\n\t \t<article className={css_class} onClick={this.click.bind(this)} onTouchStart={this.mouseEnter.bind(this)} onTouchEnd={this.mouseLeave.bind(this)} onMouseEnter={this.mouseEnter.bind(this)} onMouseLeave={this.mouseLeave.bind(this)} >\n\t \t\t<h2> \n\t \t\t\t{best ? best.headline : \"?\"}\n\t \t\t</h2>\n\t \t\t<h3 className=\"article_below_medium \">\n\t \t\t\t{best?<Link to={'/user/'+best.user}>{best.username}</Link>:\"no submissions\"}\n\t \t\t</h3>\n\t \t\t{below_content}\n \t\t\t<h4 className={\"article_below_small \"} >\n \t\t\t\t{date}\n \t\t\t</h4>\n\t \t</article>);\n\t}\n}\nlet mstp = (state) => ({force_click:state.force_click, tour:state.show_tour});\n\nexport default connect(mstp)(withRouter(NewspaperItem));\n","let forceClickAction = (target) => ({type: 'FORCE_CLICK_ACTION', target:target});\n\nexport default forceClickAction;","let toggleTourAction = () => ({type: 'TOGGLE_TOUR_ACTION'});\nexport default toggleTourAction;\n","import React, { useState } from 'react';\nimport {withRouter, Link} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport ReactJoyride, { ACTIONS, EVENTS, STATUS } from 'react-joyride';\nimport forceClickAction from './actions/forceClickAction';\nimport toggleTourAction from './actions/toggleTourAction';\nlet GoToActive = (props) => (<div>\n    <button type='button' onClick={props.f}>go somewhere </button>\n  </div>\n);\n/*\n\nORDER\n\nFIRST POPUP NEWSPAPER\nWelcome/its comedy news \n\nWHOLE NEWSPAPER \nThese are our stories\n\n-> ACTIVE \nACTIVE BUTTON\nThese stories need headlines!\n\nONE STORY\nClick to see what we've got so far. \nThe winning headline \n\nTODO Tomorrow:\nMake 3rd step dive down into the active page\nfigure out a way to show Item\nMAYBE: THrough URL re-render but big changes\nELSE: auto-click for the user annd unnclick inn callback\n\n*/\n\n\nclass OnboardingSteps extends React.Component{\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      stepindex:0,\n      loading:false,\n      run: true,\n      steps: [\n        {\n          content: <div className='intro_tour'><h2>Read the News!</h2><h3></h3></div>,\n          target: \".home_top_link\",\n          placement: \"auto\",\n          disableBeacon: true,\n        },\n        {\n          content: <div className='intro_tour'><h2>Write the News!</h2><h3>We're still writing and voting on these stories.</h3></div>,\n          target: \".active_top_link\",\n          placement: \"auto\",\n          disableBeacon: true,\n        },\n        {\n          content: <div className='intro_tour'><h2>Can you do better?</h2><h3>Click to expand.</h3></div>,\n          target: \".article1\",\n          style:{zIndex:1005},\n          disableBeacon: true,\n        },\n        {\n          content:<div className='intro_tour'><h2>Vote or write a headline.</h2><h3></h3></div>,\n          target: \".itemcontainer\",\n           styles: {\n              options: {\n                overlayColor:\"rgba(0,0,0,0)\",\n                spotlightShadow:\"\",\n              },\n              spotlight:{\n                backgroundColor:\"rgba(0,0,0,0)\"\n              }\n            },\n          disableBeacon: true,\n        },\n        {\n          content:<div className='intro_tour'><h2>Click around and explore!</h2><h3></h3></div>,\n          target: \"body\",\n          placement:\"center\",\n          disableBeacon: true,\n        },\n      ]\n    }\n  }\n  start() {\n    this.setState({run:true});\n  }\n  next() {\n    this.setState({stepindex:this.state.stepindex+1});\n  }\n  handleCallback(data) {\n    let wait_time=100;\n\n    const { action, index, type, status } = data;\n\n    // 2 to 3\n    if (type==EVENTS.STEP_AFTER && index==2 && (action==ACTIONS.NEXT || action==ACTIONS.CLOSE)) {\n      this.props.force_click(true);\n    }\n    // 3 to 4\n    if (type==EVENTS.STEP_AFTER && index==3 && (action==ACTIONS.NEXT || action==ACTIONS.CLOSE)) {\n      this.props.force_click(false);\n    }\n    // 4 to 3\n    if (type==EVENTS.STEP_AFTER && index==4 && action==ACTIONS.PREV) {\n      this.props.force_click(true);\n    }\n    // 3 to 2\n    if (type==EVENTS.STEP_AFTER && index==3 && action==ACTIONS.PREV) {\n      this.props.force_click(false);\n    }\n    if ([STATUS.FINISHED, STATUS.SKIPPED].includes(status) && this.state.run) {\n      this.props.toggle_tour();\n    } \n    //VERY IMPORTANT\n    //To show across pages, you have to sent the run state to false. \n    // from step zero to step one\n    // this is 0 to 1\n    else if (type==EVENTS.STEP_AFTER && index==0 && (action==ACTIONS.NEXT || action==ACTIONS.CLOSE)) {\n      this.setState({loading:true,run:false})\n      this.props.history.push('/active');\n      setTimeout(() => {\n        this.setState({\n          loading:false,\n          run: true,\n          stepindex:1\n        });\n      }, wait_time);\n    }\n\n    // from step 1 back to step 0\n    else if (type==EVENTS.STEP_AFTER && index==1 && action==ACTIONS.PREV) {\n      this.setState({loading:true,run:false})\n      this.props.history.push('/');\n      setTimeout(() => {\n        this.setState({\n          loading:false,\n          run: true,\n          stepindex:0\n        });\n      }, wait_time);\n    }\n\n    else if (type === EVENTS.STEP_AFTER || type === EVENTS.TARGET_NOT_FOUND) {\n      console.log('doing a normal index update');\n      // Update state to advance the tour\n      this.setState({ stepindex: index + (action === ACTIONS.PREV ? -1 : 1) });\n    } \n\n    else if (type === EVENTS.TOOLTIP_CLOSE) {\n      this.setState({ stepindex: index + 1 });\n    }\n\n  }\n  \n  render() {\n    let styles = {\n        options: {\n          primaryColor: '#000',\n          textColor: '#333',\n          zIndex: 1005,\n        },\n        tooltip: {\n          padding:5\n        },\n        tooltipContent: {\n          padding: '10px 5px',\n       },\n\n    };\n    return (<React.Fragment>\n      <ReactJoyride\n        callback={this.handleCallback.bind(this)}\n        stepIndex={this.state.stepindex}\n        steps={this.state.steps}\n        run={this.state.run}\n        continuous={true}\n        showProgress\n        styles={styles}\n        showSkipButton />\n    </React.Fragment>);\n  };\n}\nlet mstp = (state) => state;\nlet mdtp = dispatch => ({\n  force_click: (target) => {dispatch(forceClickAction(target));},\n  toggle_tour: () => {dispatch(toggleTourAction());},\n})\nexport default connect(mstp,mdtp)(withRouter(OnboardingSteps));\n","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport loginAction from './actions/loginAction'\nimport NewspaperItem from './NewspaperItem'\nimport OnboardingSteps from './OnboardingSteps'\n\n\nclass About extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {expand:true}\n\t}\n\tguestLogin() {\n\t\tthis.props.firebase.login(null,null).then(user=>{\n\t\t\tthis.props.setLogin(user);\n\t\t\tthis.props.history.push(\"/newspaper\");\t\n\t\t});\n\t}\n\ttoggle() {\n\t\tthis.setState({expand:!this.state.expand})\n\t}\n\trender() {\n\t\treturn (\n\t<div className='landing'>\n\t{/* \n\t\tBottom Shelf News is a comedy newspaper where the users write the headlines. \n\n\t\tREAD THE NEWS: Close this popup to \n\n\t\tWRITE THE NEWS: Some stories need headlines! Find them heree. \n\n\t\tFAQ (expand) \n\n\n\t*/ }\n\t\t<div className='dummy_newspaper'>\n\t\t\t\t<NewspaperItem num={0} post={dummy_1} />\t\n\t\t\t\t<NewspaperItem num={1} post={dummy_2} />\t\n\t\t\t\t<NewspaperItem num={2} post={dummy_4} />\t\n\t\t</div>\n\t\t<div className='buttons'>\n\t\t\t<Link to='/' className='buttonLink'>\n\t\t\t\t<button className='landing_button' type='button'>\n\t\t\t\t\tSee the paper\n\t\t\t\t</button>\n\t\t\t</Link>\n\t\t\t<button className='landing_button' type='button' onClick={this.toggle.bind(this)}>\n\t\t\t\tLearn More {this.state.expand?\"\":\"\"}\n\t\t\t</button>\n\t\t</div>\n\t\t{this.state.expand && \n\t\t<div className='faq'>\n\n\t\t\t<h3 className='faq-q'>\n\t\t\t\tHow does it work?\n\t\t\t</h3>\n\t\t\t<p className='faq-a'>\n\t\t\t\tWe take a news story with a regular, not-funny headline:\n\t\t\t</p>\n\t\t\t<div className='dummy_newspaper'>\n\t\t\t\t<NewspaperItem num={0} post={dummy_3} />\t\n\t\t\t</div>\t\t\t\t\n\t\t\t<p className='faq-a'>\n\t\t\t\t...and our users think of a funnier way to say the same thing:\n\t\t\t</p>\n\t\t\t<div className='dummy_newspaper'>\n\t\t\t\t<NewspaperItem num={0} post={dummy_1} />\t\n\t\t\t</div>\t\t\t\t\n\t\t\t<p className='faq-a'>\n\t\t\t\tThat's it! You can vote on your favorite headlines or submit your own.\n\t\t\t</p>\n\n\t\t\t<h3 className='faq-q'>\n\t\t\t\tSo there are no actual stories, it's just the headlines?\n\t\t\t</h3>\n\t\t\t<p className='faq-a'>\n\t\t\t\tCorrect.\n\t\t\t</p>\n\n\t\t\t<h3 className='faq-q'>\n\t\t\t\tDo I need an account?\n\t\t\t</h3>\n\t\t\t<p className='faq-a'>\n\t\t\t\tNope, but it's helpful! You can make an anonymous Guest Account instantly and start to vote and submit right now:\n\t\t\t</p>\n\t\t\t<button onClick={this.guestLogin.bind(this)}>Log In Anonymously</button>\n\n\t\t\t<p></p>\n\t\t</div>}\n\n</div> );\n\n\t}\n}\nlet dummy_1 = {\n\t\"source\":\"CBS News\",\n\t\"timestamp\":1589475333790,\n\t\"title\":\"Wisconsin bars packed with patrons almost immediately after court strikes down stay-at-home order\",\n\t\"url\":\"https://www.cbsnews.com/news/wisconsin-bars-opened-packed-supreme-court-stay-at-home-strikes-down/\",\n\t\"postID\":\"-M7J6CP0WwFhL4HqBL5y\",\"headlines\":[{\"headline\":\"Wisconsinites exercise constitutional right to alcoholism\",\n\t\"key\":\"-M7J8h7_597oh6URo9T4\",\"timestamp\":1589475988052,\n\t\"user\":\"eN7piCRiXON5xRt7SCVHGqAngBP2\",\n\t\"username\":\"hugh\",\n\t\"votes\":{\"Dt0zmo7rdKTYQteiMmJ46KgI7vB2\":true,\"eN7piCRiXON5xRt7SCVHGqAngBP2\":true,\"fRx1U5clgEddY9fscGwjzYEzgmf1\":true},\n\t\"score\":3}]};\n\nlet dummy_2={ \"source\": \"ABC\", \"timestamp\": 1589403851444, \"title\": \"Four-legged robot patrols Singapore park to promote social distancing during the coronavirus outbreak. \", \"url\": \"https://abcn.ws/2WuQfyt\", \"postID\": \"-M7EqWe5DgD2Y3dazszO\", \"headlines\": [ { \"headline\": \"Singapore to automate loneliness!\", \"key\": \"-M7TaKxfy7E9dRUwDtA-\", \"timestamp\": 1589651267468, \"user\": \"eN7piCRiXON5xRt7SCVHGqAngBP2\", \"username\": \"hugh\", \"votes\": { \"eN7piCRiXON5xRt7SCVHGqAngBP2\": true }, \"score\": 1 } ] }\nlet dummy_3 = {\n\t\"source\":\"CBS News\",\n\t\"timestamp\":1589475333790,\n\t\"title\":\"Wisconsin bars packed with patrons almost immediately after court strikes down stay-at-home order\",\n\t\"url\":\"https://www.cbsnews.com/news/wisconsin-bars-opened-packed-supreme-court-stay-at-home-strikes-down/\",\n\t\"postID\":\"-M7J6CP0WwFhL4HqBL5y\",\n\t\"headlines\":[]};\nlet dummy_4 = {\n  \"source\": \"ABC\",\n  \"timestamp\": 1589662321739,\n  \"title\": \"Therapy dog to receive an honorary degree from Virginia Tech. \",\n  \"url\": \"https://abcn.ws/2TaNgJo\",\n  \"postID\": \"-M7UFVkdkRhpIMq-5EMV\",\n  \"headlines\": [\n    {\n      \"headline\": \"You don't need student loans to become a therapist - just be a dog!\",\n      \"key\": \"-M7UFmHwID3enTjBn69G\",\n      \"timestamp\": 1589662393578,\n      \"user\": \"eN7piCRiXON5xRt7SCVHGqAngBP2\",\n      \"username\": \"hugh\",\n      \"votes\": {\n        \"C53ykWdF7vQMwh3d3N1JwFzOVBg2\": true,\n        \"LyRx7aPivSYx7m7c9QeIxXZ4HCw2\": true,\n        \"b5A1zyXxIfWZD3GUQcmb1yJlYzD3\": true,\n        \"eN7piCRiXON5xRt7SCVHGqAngBP2\": true\n      },\n      \"score\": 4\n    }\n  ]\n};\nlet mstp = (state) => ({firebase:state.firebase});\nlet mdtp = (dispatch) => (  {setLogin : (user) => dispatch(loginAction(user)) }  );\nexport default connect(mstp,mdtp)(About);\n\n","import React from 'react';\nimport {Link, withRouter} from 'react-router-dom';\nimport loginAction from './actions/loginAction';\nimport {connect} from 'react-redux';\n\nclass LoginForm extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {email:\"\", pass:\"\", error:null};\n\t}\n\tsubmit(event) {\n\t\tevent.preventDefault();\n\t\tthis.props.firebase.login(this.state.email, this.state.pass)\n\t\t\t.then(user=>{\n\t\t\t\tthis.setState({email:\"\",pass:\"\"});\n\t\t\t\tthis.props.setLogin(user);\n\t\t\t\tthis.props.history.push(\"/\");\t\n\t\t\t})\n\t\t\t.catch(error=>{\n\t\t\t\t//this.setState({error:error});\n\t\t\t});\n\t}\n\n\tchange(event) {\n\t\tthis.setState({[event.target.name]:event.target.value});\n\t}\n\n\tguestLogin() {\n\t\tthis.props.firebase.login(null,null).then(user=>{\n\t\t\tthis.props.setLogin(user);\n\t\t\tthis.setState({email:\"\",pass:\"\", welcome:true});\n\t\t\tthis.props.history.push(\"/\");\t\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t<form className=\"form-group col-6\" onSubmit={this.submit.bind(this)}>\n\t\t\t<label> Email: </label>\n\t\t\t<input name=\"email\" className=\"form-control\" value={this.state.email} onChange={this.change.bind(this)}/>\n\t\t\t<label> Password: </label>\n\t\t\t<input type=\"password\" name=\"pass\" className=\"form-control\" value={this.state.pass} onChange={this.change.bind(this)}/>\n\t\t\t<p></p>\n\t\t\t<button className=\"form-control\">submit</button>\n\t\t\t{this.state.error? <p>{this.state.error.message}</p> : null }\n\t\t\t<p>Don't have an account? <Link to='/signup'> Sign Up! </Link></p>\n\t\t\t<button type=\"button\" className=\"form-control\" onClick={this.guestLogin.bind(this)}>Continue as Guest</button>\n\t\t</form>);\n\t}\n}\nlet mapStateToProps = function(state) {return {...state}};\nlet mapDispatchToProps = function(dispatch) {\n\treturn {\n\t\tsetLogin : (user) => dispatch(loginAction(user))\n\t};\n}\nlet Connected = connect(mapStateToProps, mapDispatchToProps)(LoginForm);\nconst Login = withRouter(Connected);\nexport default Login;","import React from 'react';\nimport {withRouter} from 'react-router-dom';\nimport {connect} from 'react-redux';\nclass SignupForm extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {email:\"\", pass:\"\", displayName:\"\"};\n\t}\n\tsubmit(event) {\n\t\tevent.preventDefault();\n\t\tconsole.log(\"submit\");\n\t\tconsole.log(this.props.firebase);\n\t\tthis.props.firebase\n\t\t\t.createUser(this.state.email, this.state.pass, this.state.displayName)\n\t\t\t\t.then(authUser => {\n\t\t\t\t\tconsole.log(\"signup success\");\n\t\t\t\t\tthis.setState({email:\"\", pass:\"\", error:null});\n\t\t\t\t\tthis.props.history.push(\"/home\");\n\t\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\t\tthis.setState({ error });\n\t\t\t\t});\n\t}\n\tchange(event) {\n\t\tthis.setState({[event.target.name]:event.target.value});\n\t}\n\trender() {\n\t\treturn (\n\t\t<div className=\"container\">\n\t\t\t<div className=\"row\">\n\t\t\t<h3 className=\"col-sm-6 text-center\">Register New Account</h3>\n\t\t\t</div> \n\t\t\t<form className=\"form-group col-6\" onSubmit={this.submit.bind(this)}>\n\t\t\t\t<label> Display Name: </label>\n\t\t\t\t<input name=\"displayName\" className=\"form-control\" value={this.state.displayName} onChange={this.change.bind(this)}/>\n\t\t\t\t<label> Email: </label>\n\t\t\t\t<input name=\"email\" className=\"form-control\" value={this.state.email} onChange={this.change.bind(this)}/>\n\t\t\t\t<label> Password: </label>\n\t\t\t\t<input type=\"password\" name=\"pass\" className=\"form-control\" value={this.state.pass} onChange={this.change.bind(this)}/>\n\t\t\t\t<p></p>\n\t\t\t\t<button className=\"form-control\">submit</button>\n\t\t\t</form>\n\t\t\t{this.state.error? \n\t\t\t\t<div>\n\t\t\t\t\t<h5>error!</h5>\n\t\t\t\t\t{this.state.error.message}\n\t\t\t\t</div> \n\t\t\t: null}\n\t\t</div>);\n\t}\n}\nlet mapStateToProps = (state) => ({firebase:state.firebase});\nconst SignupPage = connect(mapStateToProps)(withRouter(SignupForm));\nexport default SignupPage;","let gotPostsAction = (posts) => ({type:\"GOT_POSTS_ACTION\", data:posts});\nexport default gotPostsAction;","import uuid from 'uuid';\nimport React from 'react';\nimport Item from './Item';\n//import {connect} from 'react-redux';\n\n/* TODO:\n  Right now creating Items with the props I will send once data is organzied how I want.\n  First change here, then elsewhere\n  News Item consists of:\n  Original Title\n  URL\n  Best Rewriting\n  Other Rewritings (2)\n*/\nconst ItemList = (props) => {\n  if (!props.items) return <div>nothing to display</div>\n  return (\n    <div>\n      <ul className = 'links'>\n        {props.items.map(item =>\n        <li key={uuid.v4()} >\n         <Item \n            post={item}\n            show={props.show?props.show:4}\n         />\n        </li>\n        )}\n      </ul>\n    </div>\n  );\n  }\n//NOTE: mstp removed, can restore\nexport default ItemList;","let sortHeadlines = (submissions) => {\n\t//console.log(submissions);\n\tif (!submissions) return [];\n\tlet headlines = Object.keys(submissions)\n\t.map(key=>{\n\t\tlet headline = submissions[key]\n\t\tlet reducer = function(score, cur) {\n\t\t\tif (cur) return score+1;\n\t\t\telse if (cur===false) return score-1;\n\t\t\treturn score;\n\t\t}\n\t\tif (!headline.votes) headline.votes = [];\t\n\t\tlet score = Object.values(headline.votes).reduce(reducer,0);\n\t\theadline.score=score;\n\t\theadline.key=key;\n\t\treturn headline;\n\t});\n\theadlines.sort( (a,b)=>b.score-a.score);\n\treturn headlines;\n}\nexport default sortHeadlines;\n","let sortStories = (stories) => {\n\tstories.forEach(story=>{\n\t\tstory.total = story.headlines.reduce( ((a,b) => a + b.score), 0)\n\t\tstory.total += story.headlines.length;\n\t})\n\tstories.sort( (a,b) => b.total-a.total) ;\n\treturn stories;\n}\nexport default sortStories;","import sortHeadlines from './sortHeadlines';\nimport sortStories from './sortStories';\n\nlet processStories = (story_results,success) => {\n\tif (!story_results) return [];\n\tlet keys = Object.keys(story_results);\n\tlet stories = keys.map((key) => {\n\t\tlet story= story_results[key];\n\t\tstory.postID=key;\n\t\tif (story.headlines) {\n\t\t\tstory.headlines = sortHeadlines(story.headlines);\n\t\t}\n\t\telse {\n\t\t\tstory.headlines = [];\n\t\t}\n\t\treturn story;\n\t});\n\tstories = sortStories(stories);\t\n\treturn stories;\n}\nexport default processStories;","import React from 'react';\nimport {connect} from 'react-redux';\nimport gotPostsAction from './actions/gotPostsAction';\nimport ItemList from './ItemList';\nimport {Link} from 'react-router-dom';\nimport NewspaperItem from './NewspaperItem';\nimport uuid from 'uuid';\nimport './Newspaper.css';\nimport processStories from './util/processStories';\n\nclass NewsHome extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t// 'stories' is array of keys, ordered\n\t\t// submissions is key:subs\n\t\tthis.state = {submissions:null}\n\t}\n\t// we use DidMount for initial API call\n\tcomponentDidMount() {\n\t\tthis.props.firebase.getTopPosts()\n\t\t.then(res=>res.val())\n\t\t.then(story_results=> {\n\t\t\tlet posts = processStories(story_results);\n\t\t\tthis.props.gotPosts(posts);\n\t\t});\n\t}\n\n\trender() {\n\t\treturn  (\n\t\t\t<div>\n\t\t        {this.props.firebase.auth.currentUser? <p><Link to='/admin'>Admin Panel</Link></p> : null }\n\t\t\t\t<ItemList items={this.props.posts} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\nlet mstp = state => {\n\treturn {\n\t\tfirebase:state.firebase,\n\t\tposts:state.posts};\n}\nlet mdtp = dispatch => ({\n\tgotPosts: (posts) => {dispatch(gotPostsAction(posts));}\n})\nexport default connect(mstp, mdtp)(NewsHome);\n\n","import React, {Fragment} from 'react';\nimport {connect} from 'react-redux';\nimport gotPostsAction from './actions/gotPostsAction';\nimport ItemList from './ItemList';\nimport {Link} from 'react-router-dom';\nimport NewspaperItem from './NewspaperItem';\nimport uuid from 'uuid';\nimport processStories from './util/processStories';\nimport './Newspaper.css';\n\nclass Newspaper extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t// 'stories' is array of keys, ordered\n\t\t// submissions is key:subs\n\t\tthis.state = {submissions:null}\n\t}\n\t// we use DidMount for initial API call\n\tcomponentDidMount() {\n\t\tthis.props.firebase.getTopPosts()\n\t\t.then(res=>res.val())\n\t\t.then(story_results=> {\n\t\t\tlet posts = processStories(story_results);\n\t\t\tthis.props.gotPosts(posts);\n\t\t});\n\t}\n\trender() {\n\t\treturn  (\n\t\t\t<div className='newsPaper'>\n\t\t\t\t <div className='gridParent'>\n\t\t\t\t\t{this.props.posts.map((post,index)=><NewspaperItem num={index} post={post} key={uuid.v4()}/>)}\n\t\t\t\t </div>\n\t\t\t</div>);\n\t}\n}\n\n\nlet mstp = state => {\n\treturn {\n\t\tfirebase:state.firebase,\n\t\tposts:state.posts};\n}\nlet mdtp = dispatch => ({\n\tgotPosts: (posts) => {dispatch(gotPostsAction(posts));}\n})\nexport default connect(mstp, mdtp)(Newspaper);\n\n","import React, {Fragment} from 'react';\nimport {Link} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport loginAction from './actions/loginAction';\nimport NewspaperItem from './NewspaperItem';\nimport OnboardingSteps from './OnboardingSteps';\nimport toggleTourAction from './actions/toggleTourAction';\n\nlet Welcome = (props) => (\n\t<Fragment>\n\t\t<p>\n\t\t\tWelcome to bottom shelf news. \n\t\t\tThis is a comedy newspaper where the headlines are written by the users! \n\t\t</p>\n      <button\n      \ttype='button'\n        onClick={()=>{props.close();props.setTour();}}\n        style={{ backgroundColor: \"#ff0044\", color: \"white\", border: \"none\", fontSize: \"24px\", padding: \"15px 32px\", cursor: \"pointer\", borderRadius: \"10px\" }}>Take The Tour</button>\n\t</Fragment>);\nlet mstp = state => {\n\treturn {\n\t\tfirebase:state.firebase,\n\t\tposts:state.posts};\n}\nlet mdtp = dispatch => ({\n\tsetTour: (posts) => {dispatch(toggleTourAction());},\n})\nexport default connect(mstp,mdtp)(Welcome);\n","import React, {Fragment} from 'react';\nimport {connect} from 'react-redux';\nimport gotPostsAction from './actions/gotPostsAction';\nimport toggleTourAction from './actions/toggleTourAction';\nimport ItemList from './ItemList';\nimport {Link} from 'react-router-dom';\nimport NewspaperItem from './NewspaperItem';\nimport Welcome from './Welcome';\nimport uuid from 'uuid';\nimport processStories from './util/processStories';\nimport OnboardingSteps from './OnboardingSteps';\nimport './Newspaper.css';\n\nclass FrozenNewspaper extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t// TODO welcome only if new or not logged in\n\t\tlet welcome = !this.props.tour;\n\t\tthis.state = {submissions:null, welcome:welcome}\n\t}\n\t// we use DidMount for initial API call\n\tcomponentDidMount() {\n\t\tthis.props.firebase.getFrozenStories()\n\t\t.then(res=>res.val())\n\t\t.then(story_results=> {\n\t\t\tlet posts = processStories(story_results);\n\t\t\tthis.props.gotPosts(posts);\n\t\t});\n\t}\n\tcloseWelcome() {\n\t\tthis.setState({welcome:false});\n\t}\n\trender() {\n\t\treturn  (\n\t\t\t<div className='newsPaper'>\n\t\t\t\t{this.state.welcome &&\n\t\t\t\t\t<Fragment> \n\t\t\t\t\t\t<div className='blocker' onClick={this.closeWelcome.bind(this)}></div>\n\t\t\t\t\t\t<div className='landing_overlay'>\n\t\t\t\t\t\t\t<div className='close_landing_overlay'>\n\t\t\t\t\t\t\t\t<span className='closebutton'></span> {/* this is a dummy span to center 'Welcome' w button right-aligned */}\n\t\t\t\t\t\t\t\t<span>Welcome</span>\n\t\t\t\t\t\t\t\t<span className='closebutton' onClick={this.closeWelcome.bind(this)}>x</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Welcome close={this.closeWelcome.bind(this)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Fragment> \n\t\t\t\t}\n\t\t\t\t <div className='gridParent'>\n\t\t\t\t\t{this.props.posts.map((post,index)=><NewspaperItem num={index} post={post} key={uuid.v4()}/>)}\n\t\t\t\t </div>\n\t\t\t</div>);\n\t}\n}\n\n\nlet mstp = state => {\n\treturn {\n\t\ttour:state.show_tour,\n\t\tfirebase:state.firebase,\n\t\tposts:state.posts};\n}\nlet mdtp = dispatch => ({\n\tgotPosts: (posts) => {dispatch(gotPostsAction(posts));},\n})\nexport default connect(mstp, mdtp)(FrozenNewspaper);\n\n","import React from 'react';\nimport ItemList from './ItemList';\nimport gotPostsAction from './actions/gotPostsAction';\nimport {connect} from 'react-redux';\n\nclass Category extends React.Component {\n\tcomponentDidMount() {\n\t\t//let category = this.props.match.params.category;\n\t\t/*\n\t    axios.get(\"http://localhost:8080/api/posts/category/\" + category)\n\t    .then( response => {\n\t    \tthis.props.gotPosts(response.data);\n\t    })\n\t    .catch(err => {\n\t    \tconsole.log(\"Error Fetching Posts:\");\n\t    \tconsole.log(err);\n\t    }); */\n\t}\n\n\trender() {\n\t\treturn  (\n\t\t\t<div>\n\t\t\t\t<h2>News Articles</h2>\n\t\t\t\t{/* HERE is where to conditionally show plus to add new post */}\n\t\t\t\t<ItemList show_category={true} items={this.props.posts} />\n\t\t\t</div>\n\t\t);\n\t}\n}\nlet mstp = state => {\n\treturn {posts:state.posts};\n}\nlet mdtp = dispatch => ({\n\tgotPosts: (posts) => dispatch(gotPostsAction(posts))\n})\nexport default connect(mstp, mdtp)(Category);\n","import React from 'react';\nimport gotPostsAction from './actions/gotPostsAction';\nimport {connect} from 'react-redux';\nimport ItemList from './ItemList';\nimport sortHeadlines from './util/sortHeadlines';\n\nclass UserPage extends React.Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {active:null, frozen:null}\n\t}\n\tcomponentDidMount() {\n\t\tlet user = this.props.match.params.user;\n\t\tthis.props.firebase.getSubmissionsByUser(user)\n\t\t.then(res => res.val())\n\t\t.then(posts => {\n\t\t\tif (!posts || !posts.stories) return;\n\t\t\tlet story_keys = Object.keys(posts.stories);\n\t\t\tlet active = story_keys.filter(k=>posts.stories[k].status==='active');\n\t\t\tlet frozen = story_keys.filter(k=>posts.stories[k].status==='frozen');\n\n\t\t\tlet active_promises = active.map(k=>this.props.firebase.getStoryByID(k));\n\t\t\tPromise.all(active_promises)\n\t\t\t.then(res=>res.map(item=>item.val()))\n\t\t\t.then(stories=>{\n\t\t\t\tstories.forEach((story,i)=>{\n\t\t\t\t\tfor (var headline in story.headlines){\n\t\t\t\t\t\tif (story.headlines[headline].user != user) {\n\t\t\t\t\t\t\tdelete story.headlines[headline];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tstory.headlines = sortHeadlines(story.headlines);\n\t\t\t\t\tstory.postID=active[i];\n\t\t\t\t})\n\t\t\t\tthis.setState({active:stories});\n\t\t\t})\n\n\t\t\tlet frozen_promises = frozen.map(k=>this.props.firebase.getFrozenStoryByID(k));\n\t\t\tPromise.all(frozen_promises)\n\t\t\t.then(res=>res.map(item=>item.val()))\n\t\t\t.then(stories=>{\n\t\t\t\tstories.forEach((story,i)=>{\n\t\t\t\t\tfor (var headline in story.headlines){\n\t\t\t\t\t\tif (story.headlines[headline].user != user) {\n\t\t\t\t\t\t\tdelete story.headlines[headline];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tstory.headlines = sortHeadlines(story.headlines);\n\t\t\t\t\tstory.postID=frozen[i];\n\t\t\t\t})\n\t\t\t\tthis.setState({frozen:stories});\n\t\t\t})\n\t\t})\n\t}\n\n\trender() {\n\t\treturn( <div>\n\t\t\t<h1>active posts </h1>\n\t\t\t<ItemList items={this.state.active} show={100}/>\n\t\t\t<h1>frozen posts </h1>\n\t\t\t<ItemList items={this.state.frozen} show={100}/>\n\t\t</div>);\n\t}\n}\nlet mstp = state => {\n\treturn {firebase:state.firebase};\n}\nlet mdtp = dispatch => ({\n\tgotPosts: (posts) => dispatch(gotPostsAction(posts))\n})\nexport default connect(mstp, mdtp)(UserPage);\n","import React from 'react';\nimport {withRouter} from 'react-router-dom';\nimport {connect} from 'react-redux';\n\nclass NewPost extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {title:\"\",url:\"\",source:\"\"};\n  }\n  submit(ev) {\n    ev.preventDefault();\n      this.props.firebase.newArticle(this.state.title, this.state.url, this.state.source)\n      .then(res=>this.props.history.push(\"/news\"));\n  }\n\n  change(event) {\n    console.log(event);\n    console.log(this.state);\n    this.setState({[event.target.name]:event.target.value});\n  }\n\n  render() {\n\n      return (\n        <div className='submit_one'>\n              <div className='input-name'>\n                Title\n              </div>\n              <textarea onChange={this.change.bind(this)} className='' name='title' placeholder='title' />\n        \n              <div className='input-name'>\n               URL\n              </div>\n              <textarea onChange={this.change.bind(this)} className='' name='url' placeholder='URL' />\n\n              <div className='input-name'>\n                Source Name \n              </div>\n              <textarea onChange={this.change.bind(this)} className='' name='source' placeholder='source' />\n\n              <button type='button' onClick={this.submit.bind(this)}>Submit One Article</button>\n        </div>\n      )\n  }\n}\n\nconst MapStateToProps = state => ({posts:state.posts, categories:state.categories, firebase:state.firebase});\n\nexport default withRouter(connect(MapStateToProps)(NewPost));\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport Item from './Item';\nimport sortHeadlines from './util/sortHeadlines';\nclass Detail extends React.Component {\n\t/*\n\tFetch all for this.props.match.params.postID from server\n\tDisplay expanded version of Item\n\t*/\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {item:null}\n\t}\n\tcomponentDidMount() {\n\t\tlet storyID = this.props.match.params.postID;\n\t\tPromise.all(\n\t\t\t[this.props.firebase.getSubmissionsForPost(storyID,100),\n\t\t\tthis.props.firebase.getStoryByID(storyID)]\n\t\t)\n\t\t.then(res=>{\n\t\t\tlet subs = res[0].val();\n\t\t\tlet story = res[1].val();\n\t\t\tif (subs) {\n\t\t\t\tstory.headlines=sortHeadlines(subs);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tstory.headlines = [];\n\t\t\t}\n\t\t\tthis.setState({item:story});\n\t\t})\n\t}\n\trender() {\n\t\tif (!this.state.item) return <div>hi</div>;\n\t\tlet item = this.state.item;\n\t\treturn (<Item post = {item} show={100}/>);\n\t}\n}\nlet mstp = state => {\n\treturn {\n\t\tfirebase:state.firebase\n\t};\n}\nexport default connect(mstp)(Detail);","import React from 'react';\nimport uuid from 'uuid';\n\n\nclass AdminVerifyStory extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {url:props.guess_url,title:props.guess_text, source_name:props.source_name || \"AP News\"};\n\t}\n\n\n\tchange(event) {\n\t\tthis.setState({[event.target.name]:event.target.value});\n\t}\n\n\trender() {\n      return (\n        <div className='adminPanel'>\n          <form autoComplete='off' action=''>\n\n            <fieldset className={'form-group wrap ' + this.props.status}>\n              <div className='input-name'>\n              \t<h2>{this.props.full}</h2>\n              </div>\n              <textarea \n              \tspellCheck={false}\n              \tvalue={this.state.title} \n              \tonChange={this.change.bind(this)} \n              \tclassName='adminPanel' \n              \tname='title'/>\n              <textarea \n                spellCheck={false}\n                className='adminPanel' \n                value={this.state.url} \n                onChange={this.change.bind(this)} \n                name='url' />\n              <textarea \n              \tspellCheck={false}\n              \tclassName='adminPanel' \n              \tvalue={this.state.source_name} \n              \tonChange={this.change.bind(this)} \n              \tname='url' />\n            </fieldset>\n            <div className = 'new-post-buttons'>\n\t\t\t<button onClick={(ev)=> {ev.preventDefault();this.props.cancel(); } }>\n\t\t\t\tCancel\n\t\t\t</button>\n              {\n              \tthis.props.categories.map( category => \n              \t\t<button \n              \t\t\tkey={uuid.v4()} \n              \t\t\ttype=\"button\" \n              \t\t\tonClick={(ev)=>{\n              \t\t\t\tev.preventDefault();\n              \t\t\t\tthis.props.save(category,this.state.url,this.state.title, this.state.source_name)\n              \t\t\t}}\n\t           \t\t\t>\n              \t\t\t{category}\n              \t\t</button> )\n              }\n            </div>\n          </form>\n        </div>\n        );\n\t}\n}\n\nexport default AdminVerifyStory;","import React from 'react';\nimport {withRouter} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport uuid from 'uuid';\nimport AdminVerifyStory from './AdminVerifyStory';\nimport NewPost from './NewPost';\n\nlet Status = {NONE:\"bg1\",SELECTED:\"bg2\",REJECTED:\"bg3\"};\n\n\nlet TweetPreview = (props) =>\n     (\n      <div className=\"tweetpreview\">\n        <p><strong>{props.tweet.cat}</strong></p>\n        <p>{props.tweet.title}</p>\n        <p><a href={props.tweet.url}>{props.tweet.url}</a></p>\n      </div>\n      );\n\nclass AdminPanel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {handle: \"\", tweets:null, to_submit:[], submitting: false};\n  }\n\n\n  fetchTweets(handle, num) {\n    let score = (tweet) => tweet.favorite_count;\n    this.props.firebase.getRecentTweets(handle, num)\n    .then(result=>result.data)\n    .then(tweets=>tweets.sort( (t1,t2)=>score(t2)-score(t1)) )\n    .then(tweets=>{\n      tweets.forEach(tweet=>{\n        tweet.status=Status.NONE;\n        tweet.id=uuid.v4();\n      });\n      window.t=tweets;\n      this.setState({tweets:tweets});\n    });\n  }\n  fetchCustomTweets(event) {\n    event.preventDefault();\n    this.fetchTweets(this.state.handle, 50);\n  }\n\n  handleChange(event) {\n    this.setState({handle:event.target.value});\n  }\n  cancel(id) {\n    let tweets = this.state.tweets;\n    tweets = tweets.slice(); \n    tweets.forEach(t=>{\n      if (t.id===id) {\n        t.status = Status.REJECTED;\n      }\n    })\n    this.setState({tweets : tweets});\n  }\n\n  save(id, cat, url, title, source_name) {\n\n    let tweets = this.state.tweets;\n    tweets = tweets.slice(); \n    tweets.forEach(t=>{\n      if (t.id===id) {\n        t.url=url;\n        t.title=title;\n        t.cat=cat;\n        t.source_name=source_name;\n        t.status = Status.SELECTED;\n      }\n    })\n    this.setState({tweets : tweets});\n  }\n\n  submit(e) {\n    e.preventDefault();\n    this.state.tweets.forEach(tweet => {\n      if (tweet.status===Status.SELECTED) {\n        this.props.firebase.newArticle(tweet.title, tweet.url, tweet.source_name)\n        .then(res=>this.props.history.push(\"/news\"));\n      }\n    });\n  }\n  show(e) {\n    this.setState({submitting: !this.state.submitting})\n  }\n\n  killDB() {\n    this.props.firebase.clearToday()\n    .then(res=>{\n      this.props.history.push('/news');\n    })\n  }\n  render() {\n      let categories = [ \n        \"general\",\"sports\",\"politics\"\n      ];\n      if (this.state.submitting) {\n        return (\n          <div>\n            <button style={{margin:\"10px\"}} onClick={()=>this.props.history.push('/news')}>Cancel</button>\n            <button onClick={this.submit.bind(this)}>submit</button>\n            <button onClick={this.show.bind(this)}>edit</button>\n            {\n              this.state.tweets.filter(tweet=>tweet.status===Status.SELECTED)\n              .map(tweet=> <TweetPreview tweet={tweet} key={uuid.v4()} />)\n            }\n          </div>)\n      }\n      else if (this.state.tweets) {\n        return (\n        <div> \n          <button style={{margin:\"10px\"}} onClick={()=>this.props.history.push('/news')}>Cancel</button>\n          <button style={{margin:\"10px\"}} onClick={()=>this.setState({tweets:null})}>Clear</button>\n          <button onClick={this.show.bind(this)}>show selections</button>\n          <button onClick={this.killDB.bind(this)}>kill database</button>\n          {this.state.tweets.map(tweet =>\n            <AdminVerifyStory \n                categories={categories} \n                full={tweet.full_text} \n                guess_url = {tweet.guess_url}\n                guess_text = {tweet.guess_text}\n                source_name={tweet.source_name}\n                status={tweet.status}\n                save={this.save.bind(this, tweet.id)} \n                cancel = {this.cancel.bind(this, tweet.id)} \n                key={tweet.id} />)\n            }\n            </div>\n          );\n      }\n      else {\n        return (\n        <div>\n          <NewPost />\n\n          <form onSubmit={this.fetchCustomTweets.bind(this)}>\n            <button style={{margin:\"10px\"}} onClick={()=>this.props.history.push('/news')}>Cancel</button>\n            <button type=\"button\" style={{margin:\"10px\"}} onClick={()=>this.fetchTweets(\"ap\",50)}>Fetch AP Tweets</button>\n            <button type=\"button\" style={{margin:\"10px\"}} onClick={()=>this.fetchTweets(\"abc\",50)}>Fetch ABC News Tweets</button>\n\n            <input type='text' placeholder=\"@handle\" value={this.state.handle} onChange={this.handleChange.bind(this)} />\n            <button type='submit'>Fetch Custom Tweets</button>\n\n          </form>\n\n          <button style={{margin:\"10px\"}} onClick={this.killDB.bind(this)}>kill database</button>\n        </div> );\n      }\n  }\n}\n\nconst MapStateToProps = state => ({posts:state.posts, categories:state.categories, user:state.user, firebase:state.firebase});\n\nexport default withRouter(connect(MapStateToProps)(AdminPanel));\n","import React from 'react';\nimport {Link, Route} from 'react-router-dom';\nimport About from './About';\nimport Login from './Login';\nimport Signup from './Signup';\nimport {connect} from 'react-redux';\nimport NewsHome from './NewsHome';\nimport Newspaper from './Newspaper';\nimport FrozenNewspaper from './FrozenNewspaper';\nimport Category from './Category';\nimport UserPage from './UserPage';\nimport NewPost from './NewPost';\nimport Detail from './Detail';\nimport AdminPanel from './AdminPanel';\nimport OnboardingSteps from './OnboardingSteps';\n\nclass TopBar extends React.Component{\n\tconstructor(props) {\n\t\tsuper(props);\n\t}\n\n\tlogOut(){\n\t\tthis.props.firebase.logOut();\n\t\tthis.props.doLogout();\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"top\">\n\t\t\t\t{this.props.show_tour && \n\t\t\t\t\t<OnboardingSteps />\n\t\t\t\t}\n\n\t\t\t\t<div className=\"navigation\">\n\t\t\t\t\t<div className=\"name bsnewslogo\">\n\t\t\t\t\t\t<Link to={'/'}>Bottom Shelf News</Link>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"menu-list\">\n\t\t\t\t\t\t<ul className=\"navbar-center\">\n\t\t\t\t\t\t\t<li className='home_top_link'>\n\t\t\t\t\t\t\t\t<Link to={'/'}>\n\t\t\t\t\t\t\t\t\tHome\t\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li className='active_top_link'>\n\t\t\t\t\t\t\t\t<Link to={'/active'}>\n\t\t\t\t\t\t\t\t\tActive\t\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<Link to={'/archive'}>\n\t\t\t\t\t\t\t\t\tArchive\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li className='about_top_link'>\n\t\t\t\t\t\t\t\t<Link to={'/about'}>\n\t\t\t\t\t\t\t\t\tAbout\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"menu-list-right\">\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t{this.props.user? \n\t\t\t\t\t\t\t\t\t<Link to={'/user/'+this.props.uid}>{this.props.user.displayName||'anonymous'}</Link>\n\t\t\t\t\t\t\t\t\t:<Link to='/signup'>Register</Link>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t{this.props.user? <button type='button' onClick={this.logOut.bind(this)}>log out</button>\n\t\t\t\t\t\t\t\t: <Link to='/login'>Log In</Link>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<h1 className='news_header'> Bottom Shelf News </h1>\n\t\t\t\t<h2 className='news_header'> A comedy newspaper where the users write the headlines.</h2>\n\t\t\t\t<Route exact path='/' component = {FrozenNewspaper} />\n\t\t\t\t<Route path='/active' component = {Newspaper} />\n\t\t\t\t<Route path='/archive' component = {NewsHome} />\n\t\t\t\t<Route path='/about' component = {About} />\n\t\t\t\t<Route path='/login' component = {Login} />\n\t\t\t\t<Route path='/signup' component = {Signup} />\n\t\t\t\t<Route path='/detail/:postID' component = {Detail} />\n\t\t\t\t<Route path='/category/:category' component = {Category} />\n\t\t\t\t<Route path='/user/:user' component = {UserPage} />\n\t\t\t\t<Route path='/new' component = {NewPost} />\n\t\t\t\t<Route path='/admin' component = {AdminPanel} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nfunction mstp(state, ownProps) {\n\treturn {\n\t\tshow_tour:state.show_tour,\n\t\tfirebase:state.firebase, \n\t\tuser: state.user,\n\t\tuid:state.user?state.user.uid:null};\n}\nfunction mdtp(disp) {\n\treturn {\n\t\tdoLogout: ()=>disp({type:'LOGOUT_ACTION'})\n\t}\n}\nexport default connect(mstp,mdtp)(TopBar);\n\n\n","import React from 'react';\nimport {BrowserRouter as Router} from 'react-router-dom';\n//import logo from './logo.svg';\nimport './App.css';\nimport TopBar from './TopBar';\n\nclass App extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<Router>\n\t\t\t\t<TopBar/>\n\t\t\t</Router>\n\t\t);\n\t}\n}\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\nimport configureStore from './store';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport './index.css';\nimport './Newspaper.css';\nReactDOM.render(\n\t\t\t<Provider store={configureStore}>\n\t\t\t\t<App/>\n\t\t\t</Provider>,\n\tdocument.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}