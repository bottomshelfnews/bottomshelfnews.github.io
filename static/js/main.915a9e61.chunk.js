(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,n){},51:function(e,t,n){e.exports=n(80)},74:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(15),i=n.n(r),o=n(6),c=n(17),l=n(31),u=n(14),p=n(2),h=n(3),m=n(24),f=n.n(m),b=(n(63),n(65),n(69),function(e){return{type:"LOGIN_ACTION",user:e}}),d=n(13),v=n.n(d),E={apiKey:"AIzaSyD9hWSw27OO_qk9eRKm2TMJ_09JcdeZdm8",authDomain:"bottomshelfnews.firebaseapp.com",databaseURL:"https://bottomshelfnews.firebaseio.com",projectId:"bottomshelfnews",storageBucket:"",messagingSenderId:"924993359943",appId:"1:924993359943:web:99b6abdc71d38c4316e162",measurementId:"G-LRJS1QWZZR"};var g=function(){return new Date((new Date).setDate((new Date).getDate()-1)).getTime()},y=function(){function e(){var t=this;Object(p.a)(this,e),this.createUser=function(e,n,a){return t.auth.createUserWithEmailAndPassword(e,n).then(function(e){return e.user.updateProfile({displayName:a})})},this.login=function(e,n){if(!e||!n)return t.auth.signInAnonymously().then(function(e){return e.user}).then(function(e){return e.admin=!1,e});var a=null;return t.auth.signInWithEmailAndPassword(e,n).then(function(e){return(a=e.user).getIdTokenResult()}).then(function(e){return a.admin=e.claims.admin,console.log(a),a})},this.logOut=function(){return t.auth.signOut()},this.resetPass=function(e){return t.auth.sendPasswordResetEmail(e)},this.updatePass=function(e){return t.auth.currentUser.updatePassword(e)},this.newArticle=function(e,n,a){if(t.auth.currentUser){var s=t.db.ref("stories").push(),r=f.a.database.ServerValue.TIMESTAMP;return s.set({title:e,url:n,source:a,timestamp:r})}},this.newHeadline=function(e,n){if(t.auth.currentUser){var a=t.db.ref("stories/"+e+"/headlines").push().key,s=t.auth.currentUser.uid,r=t.auth.currentUser.displayName,i={},o=f.a.database.ServerValue.TIMESTAMP;return i["/stories/"+e+"/headlines/"+a]={headline:n,user:s,username:r,votes:Object(u.a)({},s,!0),key:a,timestamp:o},i["/users/"+s+"/stories/"+e+"/submissions/"+a]=!0,i["/users/"+s+"/stories/"+e+"/status"]="active",console.log(i),t.db.ref().update(i),a}},this.vote=function(e,n,a){if(t.auth.currentUser){var s=t.db.ref("/stories/"+e+"/headlines/"+n+"/votes"),r=t.auth.currentUser.uid;s.update(Object(u.a)({},r,a))}},this.getFrozenStories=function(){return t.db.ref("frozen").orderByChild("timestamp").once("value")},this.getFrozenStoryByID=function(e){return t.db.ref("/frozen/"+e).once("value")},this.getTopPosts=function(){return t.db.ref("stories").orderByChild("timestamp").once("value")},this.getTodayPosts=function(){var e=g();return t.db.ref("stories").orderByChild("timestamp").startAt(e).once("value")},this.getSubmissionsByUser=function(e){return t.db.ref("users/"+e).orderByChild("timestamp").once("value")},this.getStoryByID=function(e){return t.db.ref("/stories/"+e).once("value")},this.getRecentTweets=function(e,n){var a={handle:e};return t.functions.httpsCallable("topNews")(a)},this.deleteStory=function(e){var n={};return n["stories/"+e]=null,console.log(n),t.getSubmissionsForPost(e).then(function(e){return e.val()}).then(function(a){for(var s in a){var r=a[s].user;n["users/"+r+"/stories/"+e]=null}return console.log(n),t.db.ref().update(n)})},this.clearToday=function(){return t.getTopPosts().then(function(e){return e.val()}).then(function(e){return console.log(e),e}).then(function(e){return Object.keys(e||{})}).then(function(e){return Promise.all(e.map(t.deleteStory))})},f.a.initializeApp(E),this.auth=f.a.auth(),this.db=f.a.database(),this.functions=f.a.functions(),this.unsub=this.auth.onAuthStateChanged(function(e){e&&e.getIdTokenResult().then(function(t){e.admin=!!t.claims.admin,k.dispatch(b(e))}),t.unsub()})}return Object(h.a)(e,[{key:"email",value:function(){return this.auth.currentUser?this.auth.currentUser.email:null}},{key:"saveArticle",value:function(e,t){var n={};return n["frozen/"+e+"/article_text"]=t,n["frozen/"+e+"/article_saved"]=!0,this.db.ref().update(n)}},{key:"editArticle",value:function(e,t){var n={};return n["frozen/"+e+"/article_text"]=t,n["frozen/"+e+"/article_saved"]=null,this.db.ref().update(n)}},{key:"freezeStory",value:function(e){var t=this;return this.db.ref("stories/"+e).once("value").then(function(e){return e.val()}).then(function(n){if(n){n.frozen=!0;var a={};a["/stories/"+e]=null,a["/frozen/"+e]=n;var s=n.headlines||{};for(var r in s){a["/users/"+s[r].user+"/stories/"+e+"/status"]="frozen"}return t.db.ref().update(a)}})}},{key:"unFreezeStory",value:function(e){var t=this;return console.log("unfreeze"),console.log(e),this.db.ref("frozen/"+e).once("value").then(function(e){return e.val()}).then(function(n){if(n){n.frozen=null;var a={};a["/frozen/"+e]=null,a["/stories/"+e]=n;var s=n.headlines||{};for(var r in s){a["/users/"+s[r].user+"/stories/"+e+"/status"]="active"}return t.db.ref().update(a)}})}},{key:"getSubmissionsForPost",value:function(e,t){return this.db.ref("stories/"+e+"/headlines/").once("value")}},{key:"deleteSubmission",value:function(e,t,n){var a={};return a["users/"+n+"/stories/"+e+"/submissions/"+t]=null,a["stories/"+e+"/headlines/"+t]=null,console.log(a),this.db.ref().update(a)}}]),e}();var O=function(e,t,n){var a=e.slice();return a.forEach(function(e){e.postID===t&&(console.log(e.headlines),e.headlines=e.headlines.filter(function(e){return e.key!==n}),console.log(e.headlines))}),a};var k=Object(l.b)(function(e,t){switch(t.type){case"LOGIN_ACTION":return Object(c.a)({},e,{user:t.user});case"LOGOUT_ACTION":return Object(c.a)({},e,{user:null,userID:null});case"GOT_POSTS_ACTION":return Object(c.a)({},e,{posts:t.data});case"DELETE_SUBMISSION_ACTION":return Object(c.a)({},e,{posts:O(e.posts,t.postID,t.subID)});case"DELETE_ACTION":return Object(c.a)({},e,{posts:e.posts.filter(function(e){return e.postID!==t.postID})});case"TOGGLE_TOUR_ACTION":return Object(c.a)({},e,{show_tour:!e.show_tour});case"FORCE_CLICK_ACTION":return void 0!==t.target?Object(c.a)({},e,{force_click:t.target}):Object(c.a)({},e,{force_click:!e.force_click});case"EDIT_ACTION":return console.log(e),Object(c.a)({},e,{posts:e.posts.map(function(e){return e.postID!==t.postID?e:Object(c.a)({},e,{title:t.newTitle,url:t.newURL})})});default:return e}},{user:null,show_tour:!1,force_click:!1,posts:[],firebase:new y,categories:["general","sports","politics"]}),w=n(7),C=n(5),j=n(8),N=n(10),S=(n(74),n(23)),_=n(21),T=function(e){return{type:"DELETE_ACTION",postID:e}},I=function(e,t){return{type:"DELETE_SUBMISSION_ACTION",postID:e,subID:t}},D=function(e,t,n){return{type:"EDIT_ACTION",postID:e,newTitle:t,newURL:n}},x=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(w.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(s)))).vote=function(e){n.props.firebase.vote(n.props.postID,n.props.rw.key,e),n.props.vote(e)},n}return Object(j.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=!!this.props.user,t=0;e&&!0===this.props.rw.votes[this.props.user.uid]?t=1:e&&!1===this.props.rw.votes[this.props.user.uid]&&(t=-1);var n=e&&this.props.user.uid===this.props.rw.user;return s.a.createElement("section",{className:"submission main"},s.a.createElement("p",null,this.props.rw.headline),s.a.createElement("div",{className:"bottomBar"},s.a.createElement("span",null,s.a.createElement(N.b,{to:"/user/"+this.props.rw.user},this.props.rw.username||"anon")),s.a.createElement("span",null,"\u2022"),s.a.createElement("span",null,this.props.rw.score+" points"),e&&s.a.createElement(a.Fragment,null,s.a.createElement("span",null,"\u2022"),s.a.createElement("span",null,this.buttons(t))),n&&s.a.createElement(a.Fragment,null,s.a.createElement("span",null,"\u2022"),s.a.createElement("span",null,s.a.createElement(P,{delete:this.delete.bind(this)})))))}},{key:"delete",value:function(){var e=this;this.props.firebase.deleteSubmission(this.props.postID,this.props.rw.key,this.props.rw.user).then(function(t){e.props.delete(e.props.rw.key)}).catch(function(e){return console.log("error:"+e)})}},{key:"buttons",value:function(e){var t=this;return 0===e?s.a.createElement("span",null,s.a.createElement("button",{onClick:function(){return t.vote(!0)},className:"vote-button"},"+"),s.a.createElement("button",{onClick:function(){return t.vote(!1)},className:"vote-button"},"-")):1===e?s.a.createElement("span",null,s.a.createElement("button",{onClick:function(){return t.vote(null)},className:"vote-button voted"},"+"),s.a.createElement("button",{onClick:function(){return t.vote(!1)},className:"vote-button"},"-")):s.a.createElement("span",null,s.a.createElement("button",{onClick:function(){return t.vote(!0)},className:"vote-button"},"+"),s.a.createElement("button",{onClick:function(){return t.vote(null)},className:"vote-button voted"},"-"))}}]),t}(s.a.Component),P=function(e){var t=Object(a.useState)(!1),n=Object(_.a)(t,2),r=n[0],i=n[1];return r?s.a.createElement(a.Fragment,null,s.a.createElement("button",{type:"button",onClick:function(){return e.delete(e.id)}},"Confirm"),s.a.createElement("button",{type:"button",onClick:function(){return i(!1)}},"Cancel")):s.a.createElement("button",{type:"button",onClick:function(){return i(!0)}},"Delete")},A=Object(o.b)(function(e){return{firebase:e.firebase,user:e.user}})(x),z=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(w.a)(this,Object(C.a)(t).call(this,e))).state={text:n.props.post.article_text||""},n}return Object(j.a)(t,e),Object(h.a)(t,[{key:"change",value:function(e){this.setState({text:e.target.value})}},{key:"submit",value:function(){this.props.firebase.editArticle(this.props.post.postID,this.state.text)}},{key:"save",value:function(){this.props.firebase.saveArticle(this.props.post.postID,this.state.text)}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("textarea",{className:"article_editor",value:this.state.text,onChange:this.change.bind(this)})),s.a.createElement("div",null,s.a.createElement("button",{type:"button",onClick:this.submit.bind(this)}," submit "),s.a.createElement("button",{type:"button",onClick:this.save.bind(this)}," save ")))}}]),t}(s.a.Component),R=Object(o.b)(function(e){return{firebase:e.firebase}})(z),L=function(e){return e.getDate()+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" "+e.getFullYear()},B=function(e){function t(e){return Object(p.a)(this,t),Object(w.a)(this,Object(C.a)(t).call(this,e))}return Object(j.a)(t,e),Object(h.a)(t,[{key:"unfreeze",value:function(e){var t=this;this.props.firebase.unFreezeStory(e).then(function(e){t.props.history.push("/")})}},{key:"unsave",value:function(e){var t=this;this.props.firebase.editArticle(this.props.post.postID,this.props.post.article_text).then(function(e){t.props.history.push("/")})}},{key:"render",value:function(){var e=this.props.post.headlines[0].headline,t=this.props.post.title,n=this.props.post.url,a=this.props.post.source,r=this.props.post.article_text.split("\n").map(function(e){return s.a.createElement("p",{className:"news_article_section",key:v.a.v4()},e)});return s.a.createElement("div",{className:"itemcontainer"},s.a.createElement("section",{className:"date_above"},L(new Date(this.props.post.timestamp))),s.a.createElement("section",{className:"article_headline"},s.a.createElement("p",null,e)),s.a.createElement("article",{className:"news_article"},r),s.a.createElement("div",{className:"article_byline"},s.a.createElement("a",{href:n},s.a.createElement("span",{className:"code"},a+":"),t)),this.props.user&&this.props.user.admin&&s.a.createElement(U,{id:this.props.post.postID,f:this.unfreeze.bind(this)}),this.props.user&&this.props.user.admin&&s.a.createElement(F,{id:this.props.post.postID,f:this.unsave.bind(this)}))}}]),t}(s.a.Component),F=function(e){var t=Object(a.useState)(!1),n=Object(_.a)(t,2),r=n[0],i=n[1];return s.a.createElement("div",null,r?s.a.createElement("div",null,s.a.createElement("button",{type:"button",onClick:function(){return e.f(e.id)}},"Confirm"),s.a.createElement("button",{type:"button",onClick:function(){return i(!1)}},"Cancel")):s.a.createElement("button",{type:"button",onClick:function(){return i(!0)}},"UnSave"))},U=function(e){var t=Object(a.useState)(!1),n=Object(_.a)(t,2),r=n[0],i=n[1];return s.a.createElement("div",null,r?s.a.createElement("div",null,s.a.createElement("button",{type:"button",onClick:function(){return e.f(e.id)}},"Confirm"),s.a.createElement("button",{type:"button",onClick:function(){return i(!1)}},"Cancel")):s.a.createElement("button",{type:"button",onClick:function(){return i(!0)}},"UnFreeze"))},M=Object(S.e)(Object(o.b)(function(e){return{firebase:e.firebase,user:e.user}})(B)),W=function(e){function t(e){var n;Object(p.a)(this,t);var a=[];return(n=Object(w.a)(this,Object(C.a)(t).call(this,e))).props.post.headlines&&(a=n.props.post.headlines.slice(0,n.props.show)),n.state={headlines:a},n}return Object(j.a)(t,e),Object(h.a)(t,[{key:"submit",value:function(e){if(e){var t=this.props.firebase.newHeadline(this.props.post.postID,e),n={headline:e,user:this.props.user.uid,username:this.props.user.displayName,key:t,score:1,votes:Object(u.a)({},this.props.user.uid,!0)};this.setState({headlines:this.state.headlines.concat([n])})}}},{key:"vote",value:function(e,t){for(var n=this.state.headlines.slice(0),a=0;a<this.state.headlines.length;a++)if(this.state.headlines[a].key===e){var s=this.state.headlines[a];s.votes[this.props.user.uid]=t;var r=Object.values(s.votes).reduce(function(e,t){return e+(!0===t?1:!1===t?-1:0)},0);s.score=r,n[a]=s}this.setState({headlines:n})}},{key:"delete",value:function(e){var t=this;this.props.firebase.deleteStory(e).then(function(){t.props.deleteSuccess(e),t.props.history.push("/news")})}},{key:"deleteSubmission",value:function(e){this.setState({headlines:this.state.headlines.filter(function(t){return t.key!==e})})}},{key:"freeze",value:function(e){var t=this;this.props.firebase.freezeStory(e).then(function(e){t.props.history.push("/")})}},{key:"unfreeze",value:function(e){var t=this;this.props.firebase.unFreezeStory(e).then(function(e){t.props.history.push("/")})}},{key:"render",value:function(){var e=this;return this.props.post.frozen&&this.props.post.article_saved?s.a.createElement(M,{post:this.props.post}):s.a.createElement("div",{className:"itemcontainer"},s.a.createElement("section",{className:"date_above"},L(new Date(this.props.post.timestamp))),s.a.createElement("section",{className:"original main"},s.a.createElement("p",null,s.a.createElement(N.b,{to:"/detail/"+this.props.post.postID}," ",this.props.post.title," "))),s.a.createElement("div",{className:"right"},s.a.createElement("a",{href:this.props.post.url},this.props.post.source||"unknown"," \u2197")),this.state.headlines.map(function(t){return s.a.createElement(A,{key:v.a.v4(),className:"best-rewrite",postID:e.props.post.postID,rw:t,vote:e.vote.bind(e,t.key),delete:e.deleteSubmission.bind(e)})}),s.a.createElement("section",{className:"itembuttons"},this.props.user&&s.a.createElement(H,{submit:this.submit.bind(this)}),this.props.user&&this.props.user.admin&&s.a.createElement(V,{id:this.props.post.postID,delete:this.delete.bind(this)}),this.props.user&&this.props.user.admin&&!this.props.post.frozen&&s.a.createElement(G,{id:this.props.post.postID,f:this.freeze.bind(this)}),this.props.user&&this.props.user.admin&&this.props.post.frozen&&s.a.createElement(q,{id:this.props.post.postID,f:this.unfreeze.bind(this)}),this.props.user&&this.props.user.admin&&this.props.post.frozen&&s.a.createElement(R,{post:this.props.post})))}}]),t}(s.a.Component),q=function(e){var t=Object(a.useState)(!1),n=Object(_.a)(t,2),r=n[0],i=n[1];return s.a.createElement("div",null,r?s.a.createElement("div",null,s.a.createElement("button",{type:"button",onClick:function(){return e.f(e.id)}},"Confirm"),s.a.createElement("button",{type:"button",onClick:function(){return i(!1)}},"Cancel")):s.a.createElement("button",{type:"button",onClick:function(){return i(!0)}},"UnFreeze"))},G=function(e){var t=Object(a.useState)(!1),n=Object(_.a)(t,2),r=n[0],i=n[1];return s.a.createElement("div",null,r?s.a.createElement("div",null,s.a.createElement("button",{type:"button",onClick:function(){return e.f(e.id)}},"Confirm"),s.a.createElement("button",{type:"button",onClick:function(){return i(!1)}},"Cancel")):s.a.createElement("button",{type:"button",onClick:function(){return i(!0)}},"Freeze"))},V=function(e){var t=Object(a.useState)(!1),n=Object(_.a)(t,2),r=n[0],i=n[1];return s.a.createElement("div",null,r?s.a.createElement("div",null,s.a.createElement("button",{type:"button",onClick:function(){return e.delete(e.id)}},"Confirm"),s.a.createElement("button",{type:"button",onClick:function(){return i(!1)}},"Cancel")):s.a.createElement("button",{type:"button",onClick:function(){return i(!0)}},"Delete Story"))},H=function(e){var t=Object(a.useState)(!1),n=Object(_.a)(t,2),r=n[0],i=n[1];return s.a.createElement("div",null,r?s.a.createElement(J,{submit:e.submit,cancel:function(){return i(!1)}}):s.a.createElement("button",{onClick:function(){return i(!0)}},"New Submission"))},J=function(e){var t=s.a.createRef();return s.a.createElement("div",null,s.a.createElement("fieldset",null,s.a.createElement("textarea",{ref:t,name:"title",style:{width:"80%",height:"2em"}})),s.a.createElement("button",{onClick:function(){e.submit(t.current.value),e.cancel()}},"Submit"),s.a.createElement("button",{onClick:e.cancel},"Cancel"))},X=Object(S.e)(Object(o.b)(function(e){return{firebase:e.firebase,user:e.user}},function(e){return{deleteSuccess:function(t){return e(T(t))},deleteSubmissionSuccess:function(t,n){return e(I(t,n))},editSuccess:function(t,n,a){return e(D(t,n,a))}}})(W)),Y=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(w.a)(this,Object(C.a)(t).call(this,e))).state={hovering:!1,big:!1},n}return Object(j.a)(t,e),Object(h.a)(t,[{key:"mouseEnter",value:function(){this.props.tour||this.setState({hovering:!0})}},{key:"mouseLeave",value:function(){this.props.tour||this.setState({hovering:!1})}},{key:"click",value:function(){console.log("hi?"),this.props.tour||this.setState({big:!this.state.big})}},{key:"render",value:function(){var e=this.state.hovering;this.props.tour&&(e=0==this.props.num),this.state.big;var t=L(new Date(this.props.post.timestamp)),n=this.props.post.headlines.length,a=null;n>0&&(a=this.props.post.headlines[0],this.props.post.headlines.slice(1));var r="article ";if(this.props.num<5?r+="article"+(this.props.num+1):r+="articleN",this.props.force_click&&0==this.props.num)return s.a.createElement("div",null,s.a.createElement("div",{className:"blocker",onClick:this.click.bind(this)}),s.a.createElement("div",{className:"big"},s.a.createElement(X,{post:this.props.post,show:4})));if(this.state.big)return s.a.createElement("div",null,s.a.createElement("div",{className:"blocker",onClick:this.click.bind(this)}),s.a.createElement("div",{className:"big"},s.a.createElement(X,{post:this.props.post,show:4})));var i="hide";n<1&&(i="dim"),e&&(i="");var o=null;if(this.props.post.frozen){var c=this.props.post.article_text;c||(c=""),c.length>100&&(c=c.substring(0,100)+"..."),o=s.a.createElement("h3",{className:"article_below_medium "+i},c)}else o=s.a.createElement("h3",{className:"article_below_medium "+i},s.a.createElement("span",{className:"code"},s.a.createElement("a",{href:this.props.post.url},this.props.post.source),":"),this.props.post.title);return s.a.createElement("article",{className:r,onClick:this.click.bind(this),onTouchStart:this.mouseEnter.bind(this),onTouchEnd:this.mouseLeave.bind(this),onMouseEnter:this.mouseEnter.bind(this),onMouseLeave:this.mouseLeave.bind(this)},s.a.createElement("h2",null,a?a.headline:"?"),s.a.createElement("h3",{className:"article_below_medium "},a?s.a.createElement(N.b,{to:"/user/"+a.user},a.username):"no submissions"),o,s.a.createElement("h4",{className:"article_below_small "},t))}}]),t}(s.a.Component),K=Object(o.b)(function(e){return{force_click:e.force_click,tour:e.show_tour}})(Object(S.e)(Y)),Q=n(11),Z=function(e){return{type:"FORCE_CLICK_ACTION",target:e}},$=function(){return{type:"TOGGLE_TOUR_ACTION"}},ee=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(w.a)(this,Object(C.a)(t).call(this,e))).state={stepindex:0,loading:!1,run:!0,steps:[{content:s.a.createElement("div",{className:"intro_tour"},s.a.createElement("h2",null,"Read the News!"),s.a.createElement("h3",null)),target:".home_top_link",placement:"auto",disableBeacon:!0},{content:s.a.createElement("div",{className:"intro_tour"},s.a.createElement("h2",null,"Write the News!"),s.a.createElement("h3",null,"We're still writing and voting on these stories.")),target:".active_top_link",placement:"auto",disableBeacon:!0},{content:s.a.createElement("div",{className:"intro_tour"},s.a.createElement("h2",null,"Can you do better?"),s.a.createElement("h3",null,"Click to expand.")),target:".article1",style:{zIndex:1005},disableBeacon:!0},{content:s.a.createElement("div",{className:"intro_tour"},s.a.createElement("h2",null,"Vote or write a headline."),s.a.createElement("h3",null)),target:".itemcontainer",styles:{options:{overlayColor:"rgba(0,0,0,0)",spotlightShadow:""},spotlight:{backgroundColor:"rgba(0,0,0,0)"}},disableBeacon:!0},{content:s.a.createElement("div",{className:"intro_tour"},s.a.createElement("h2",null,"Click around and explore!"),s.a.createElement("h3",null)),target:"body",placement:"center",disableBeacon:!0}]},n}return Object(j.a)(t,e),Object(h.a)(t,[{key:"start",value:function(){this.setState({run:!0})}},{key:"next",value:function(){this.setState({stepindex:this.state.stepindex+1})}},{key:"handleCallback",value:function(e){var t=this,n=e.action,a=e.index,s=e.type,r=e.status;s!=Q.b.STEP_AFTER||2!=a||n!=Q.a.NEXT&&n!=Q.a.CLOSE||this.props.force_click(!0),s!=Q.b.STEP_AFTER||3!=a||n!=Q.a.NEXT&&n!=Q.a.CLOSE||this.props.force_click(!1),s==Q.b.STEP_AFTER&&4==a&&n==Q.a.PREV&&this.props.force_click(!0),s==Q.b.STEP_AFTER&&3==a&&n==Q.a.PREV&&this.props.force_click(!1),[Q.c.FINISHED,Q.c.SKIPPED].includes(r)&&this.state.run?this.props.toggle_tour():s!=Q.b.STEP_AFTER||0!=a||n!=Q.a.NEXT&&n!=Q.a.CLOSE?s==Q.b.STEP_AFTER&&1==a&&n==Q.a.PREV?(this.setState({loading:!0,run:!1}),this.props.history.push("/"),setTimeout(function(){t.setState({loading:!1,run:!0,stepindex:0})},100)):s===Q.b.STEP_AFTER||s===Q.b.TARGET_NOT_FOUND?(console.log("doing a normal index update"),this.setState({stepindex:a+(n===Q.a.PREV?-1:1)})):s===Q.b.TOOLTIP_CLOSE&&this.setState({stepindex:a+1}):(this.setState({loading:!0,run:!1}),this.props.history.push("/active"),setTimeout(function(){t.setState({loading:!1,run:!0,stepindex:1})},100))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(Q.d,{callback:this.handleCallback.bind(this),stepIndex:this.state.stepindex,steps:this.state.steps,run:this.state.run,continuous:!0,showProgress:!0,styles:{options:{primaryColor:"#000",textColor:"#333",zIndex:1005},tooltip:{padding:5},tooltipContent:{padding:"10px 5px"}},showSkipButton:!0}))}}]),t}(s.a.Component),te=Object(o.b)(function(e){return e},function(e){return{force_click:function(t){e(Z(t))},toggle_tour:function(){e($())}}})(Object(S.e)(ee)),ne=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(w.a)(this,Object(C.a)(t).call(this,e))).state={expand:!0},n}return Object(j.a)(t,e),Object(h.a)(t,[{key:"guestLogin",value:function(){var e=this;this.props.firebase.login(null,null).then(function(t){e.props.setLogin(t),e.props.history.push("/newspaper")})}},{key:"toggle",value:function(){this.setState({expand:!this.state.expand})}},{key:"render",value:function(){return s.a.createElement("div",{className:"landing"},s.a.createElement("div",{className:"dummy_newspaper"},s.a.createElement(K,{num:0,post:ae}),s.a.createElement(K,{num:1,post:se}),s.a.createElement(K,{num:2,post:ie})),s.a.createElement("div",{className:"buttons"},s.a.createElement(N.b,{to:"/",className:"buttonLink"},s.a.createElement("button",{className:"landing_button",type:"button"},"See the paper")),s.a.createElement("button",{className:"landing_button",type:"button",onClick:this.toggle.bind(this)},"Learn More ",this.state.expand?"\u25bc":"\u25ba")),this.state.expand&&s.a.createElement("div",{className:"faq"},s.a.createElement("h3",{className:"faq-q"},"How does it work?"),s.a.createElement("p",{className:"faq-a"},"We take a news story with a regular, not-funny headline:"),s.a.createElement("div",{className:"dummy_newspaper"},s.a.createElement(K,{num:0,post:re})),s.a.createElement("p",{className:"faq-a"},"...and our users think of a funnier way to say the same thing:"),s.a.createElement("div",{className:"dummy_newspaper"},s.a.createElement(K,{num:0,post:ae})),s.a.createElement("p",{className:"faq-a"},"That's it! You can vote on your favorite headlines or submit your own."),s.a.createElement("h3",{className:"faq-q"},"So there are no actual stories, it's just the headlines?"),s.a.createElement("p",{className:"faq-a"},"Correct."),s.a.createElement("h3",{className:"faq-q"},"Do I need an account?"),s.a.createElement("p",{className:"faq-a"},"Nope, but it's helpful! You can make an anonymous Guest Account instantly and start to vote and submit right now:"),s.a.createElement("button",{onClick:this.guestLogin.bind(this)},"Log In Anonymously"),s.a.createElement("p",null)))}}]),t}(s.a.Component),ae={source:"CBS News",timestamp:1589475333790,title:"Wisconsin bars packed with patrons almost immediately after court strikes down stay-at-home order",url:"https://www.cbsnews.com/news/wisconsin-bars-opened-packed-supreme-court-stay-at-home-strikes-down/",postID:"-M7J6CP0WwFhL4HqBL5y",headlines:[{headline:"Wisconsinites exercise constitutional right to alcoholism",key:"-M7J8h7_597oh6URo9T4",timestamp:1589475988052,user:"eN7piCRiXON5xRt7SCVHGqAngBP2",username:"hugh",votes:{Dt0zmo7rdKTYQteiMmJ46KgI7vB2:!0,eN7piCRiXON5xRt7SCVHGqAngBP2:!0,fRx1U5clgEddY9fscGwjzYEzgmf1:!0},score:3}]},se={source:"ABC",timestamp:1589403851444,title:"Four-legged robot patrols Singapore park to promote social distancing during the coronavirus outbreak. ",url:"https://abcn.ws/2WuQfyt",postID:"-M7EqWe5DgD2Y3dazszO",headlines:[{headline:"Singapore to automate loneliness!",key:"-M7TaKxfy7E9dRUwDtA-",timestamp:1589651267468,user:"eN7piCRiXON5xRt7SCVHGqAngBP2",username:"hugh",votes:{eN7piCRiXON5xRt7SCVHGqAngBP2:!0},score:1}]},re={source:"CBS News",timestamp:1589475333790,title:"Wisconsin bars packed with patrons almost immediately after court strikes down stay-at-home order",url:"https://www.cbsnews.com/news/wisconsin-bars-opened-packed-supreme-court-stay-at-home-strikes-down/",postID:"-M7J6CP0WwFhL4HqBL5y",headlines:[]},ie={source:"ABC",timestamp:1589662321739,title:"Therapy dog to receive an honorary degree from Virginia Tech. ",url:"https://abcn.ws/2TaNgJo",postID:"-M7UFVkdkRhpIMq-5EMV",headlines:[{headline:"You don't need student loans to become a therapist - just be a dog!",key:"-M7UFmHwID3enTjBn69G",timestamp:1589662393578,user:"eN7piCRiXON5xRt7SCVHGqAngBP2",username:"hugh",votes:{C53ykWdF7vQMwh3d3N1JwFzOVBg2:!0,LyRx7aPivSYx7m7c9QeIxXZ4HCw2:!0,b5A1zyXxIfWZD3GUQcmb1yJlYzD3:!0,eN7piCRiXON5xRt7SCVHGqAngBP2:!0},score:4}]},oe=Object(o.b)(function(e){return{firebase:e.firebase}},function(e){return{setLogin:function(t){return e(b(t))}}})(ne),ce=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(w.a)(this,Object(C.a)(t).call(this,e))).state={email:"",pass:"",error:null},n}return Object(j.a)(t,e),Object(h.a)(t,[{key:"submit",value:function(e){var t=this;e.preventDefault(),this.props.firebase.login(this.state.email,this.state.pass).then(function(e){t.setState({email:"",pass:""}),t.props.setLogin(e),t.props.history.push("/")}).catch(function(e){})}},{key:"change",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"guestLogin",value:function(){var e=this;this.props.firebase.login(null,null).then(function(t){e.props.setLogin(t),e.setState({email:"",pass:"",welcome:!0}),e.props.history.push("/")})}},{key:"render",value:function(){return s.a.createElement("form",{className:"form-group col-6",onSubmit:this.submit.bind(this)},s.a.createElement("label",null," Email: "),s.a.createElement("input",{name:"email",className:"form-control",value:this.state.email,onChange:this.change.bind(this)}),s.a.createElement("label",null," Password: "),s.a.createElement("input",{type:"password",name:"pass",className:"form-control",value:this.state.pass,onChange:this.change.bind(this)}),s.a.createElement("p",null),s.a.createElement("button",{className:"form-control"},"submit"),this.state.error?s.a.createElement("p",null,this.state.error.message):null,s.a.createElement("p",null,"Don't have an account? ",s.a.createElement(N.b,{to:"/signup"}," Sign Up! ")),s.a.createElement("button",{type:"button",className:"form-control",onClick:this.guestLogin.bind(this)},"Continue as Guest"))}}]),t}(s.a.Component),le=Object(o.b)(function(e){return Object(c.a)({},e)},function(e){return{setLogin:function(t){return e(b(t))}}})(ce),ue=Object(S.e)(le),pe=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(w.a)(this,Object(C.a)(t).call(this,e))).state={email:"",pass:"",displayName:""},n}return Object(j.a)(t,e),Object(h.a)(t,[{key:"submit",value:function(e){var t=this;e.preventDefault(),console.log("submit"),console.log(this.props.firebase),this.props.firebase.createUser(this.state.email,this.state.pass,this.state.displayName).then(function(e){console.log("signup success"),t.setState({email:"",pass:"",error:null}),t.props.history.push("/home")}).catch(function(e){t.setState({error:e})})}},{key:"change",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("h3",{className:"col-sm-6 text-center"},"Register New Account")),s.a.createElement("form",{className:"form-group col-6",onSubmit:this.submit.bind(this)},s.a.createElement("label",null," Display Name: "),s.a.createElement("input",{name:"displayName",className:"form-control",value:this.state.displayName,onChange:this.change.bind(this)}),s.a.createElement("label",null," Email: "),s.a.createElement("input",{name:"email",className:"form-control",value:this.state.email,onChange:this.change.bind(this)}),s.a.createElement("label",null," Password: "),s.a.createElement("input",{type:"password",name:"pass",className:"form-control",value:this.state.pass,onChange:this.change.bind(this)}),s.a.createElement("p",null),s.a.createElement("button",{className:"form-control"},"submit")),this.state.error?s.a.createElement("div",null,s.a.createElement("h5",null,"error!"),this.state.error.message):null)}}]),t}(s.a.Component),he=Object(o.b)(function(e){return{firebase:e.firebase}})(Object(S.e)(pe)),me=function(e){return{type:"GOT_POSTS_ACTION",data:e}},fe=function(e){return e.items?s.a.createElement("div",null,s.a.createElement("ul",{className:"links"},e.items.map(function(t){return s.a.createElement("li",{key:v.a.v4()},s.a.createElement(X,{post:t,show:e.show?e.show:4}))}))):s.a.createElement("div",null,"nothing to display")},be=(n(30),function(e){if(!e)return[];var t=Object.keys(e).map(function(t){var n=e[t];n.votes||(n.votes=[]);var a=Object.values(n.votes).reduce(function(e,t){return t?e+1:!1===t?e-1:e},0);return n.score=a,n.key=t,n});return t.sort(function(e,t){return t.score-e.score}),t}),de=function(e){return e.forEach(function(e){e.total=e.headlines.reduce(function(e,t){return e+t.score},0),e.total+=e.headlines.length}),e.sort(function(e,t){return t.total-e.total}),e},ve=function(e,t){if(!e)return[];var n=Object.keys(e).map(function(t){var n=e[t];return n.postID=t,n.headlines?n.headlines=be(n.headlines):n.headlines=[],n});return n=de(n)},Ee=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(w.a)(this,Object(C.a)(t).call(this,e))).state={submissions:null},n}return Object(j.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.getTopPosts().then(function(e){return e.val()}).then(function(t){var n=ve(t);e.props.gotPosts(n)})}},{key:"render",value:function(){return s.a.createElement("div",null,this.props.firebase.auth.currentUser?s.a.createElement("p",null,s.a.createElement(N.b,{to:"/admin"},"Admin Panel")):null,s.a.createElement(fe,{items:this.props.posts}))}}]),t}(s.a.Component),ge=Object(o.b)(function(e){return{firebase:e.firebase,posts:e.posts}},function(e){return{gotPosts:function(t){e(me(t))}}})(Ee),ye=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(w.a)(this,Object(C.a)(t).call(this,e))).state={submissions:null},n}return Object(j.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.getTopPosts().then(function(e){return e.val()}).then(function(t){var n=ve(t);e.props.gotPosts(n)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"newsPaper"},s.a.createElement("div",{className:"gridParent"},this.props.posts.map(function(e,t){return s.a.createElement(K,{num:t,post:e,key:v.a.v4()})})))}}]),t}(s.a.Component),Oe=Object(o.b)(function(e){return{firebase:e.firebase,posts:e.posts}},function(e){return{gotPosts:function(t){e(me(t))}}})(ye),ke=Object(o.b)(function(e){return{firebase:e.firebase,posts:e.posts}},function(e){return{setTour:function(t){e($())}}})(function(e){return s.a.createElement(a.Fragment,null,s.a.createElement("p",null,"Welcome to bottom shelf news. This is a comedy newspaper where the headlines are written by the users!"),s.a.createElement("button",{type:"button",onClick:function(){e.close(),e.setTour()},style:{backgroundColor:"#ff0044",color:"white",border:"none",fontSize:"24px",padding:"15px 32px",cursor:"pointer",borderRadius:"10px"}},"Take The Tour"))}),we=function(e){function t(e){var n;Object(p.a)(this,t);var a=!(n=Object(w.a)(this,Object(C.a)(t).call(this,e))).props.tour;return n.state={submissions:null,welcome:a},n}return Object(j.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.getFrozenStories().then(function(e){return e.val()}).then(function(t){var n=ve(t);e.props.gotPosts(n)})}},{key:"closeWelcome",value:function(){this.setState({welcome:!1})}},{key:"render",value:function(){return s.a.createElement("div",{className:"newsPaper"},this.state.welcome&&s.a.createElement(a.Fragment,null,s.a.createElement("div",{className:"blocker",onClick:this.closeWelcome.bind(this)}),s.a.createElement("div",{className:"landing_overlay"},s.a.createElement("div",{className:"close_landing_overlay"},s.a.createElement("span",{className:"closebutton"})," ",s.a.createElement("span",null,"Welcome"),s.a.createElement("span",{className:"closebutton",onClick:this.closeWelcome.bind(this)},"x")),s.a.createElement(ke,{close:this.closeWelcome.bind(this)}))),s.a.createElement("div",{className:"gridParent"},this.props.posts.map(function(e,t){return s.a.createElement(K,{num:t,post:e,key:v.a.v4()})})))}}]),t}(s.a.Component),Ce=Object(o.b)(function(e){return{tour:e.show_tour,firebase:e.firebase,posts:e.posts}},function(e){return{gotPosts:function(t){e(me(t))}}})(we),je=function(e){function t(){return Object(p.a)(this,t),Object(w.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h2",null,"News Articles"),s.a.createElement(fe,{show_category:!0,items:this.props.posts}))}}]),t}(s.a.Component),Ne=Object(o.b)(function(e){return{posts:e.posts}},function(e){return{gotPosts:function(t){return e(me(t))}}})(je),Se=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(w.a)(this,Object(C.a)(t).call(this))).state={active:null,frozen:null},e}return Object(j.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.user;this.props.firebase.getSubmissionsByUser(t).then(function(e){return e.val()}).then(function(n){if(n&&n.stories){var a=Object.keys(n.stories),s=a.filter(function(e){return"active"===n.stories[e].status}),r=a.filter(function(e){return"frozen"===n.stories[e].status}),i=s.map(function(t){return e.props.firebase.getStoryByID(t)});Promise.all(i).then(function(e){return e.map(function(e){return e.val()})}).then(function(n){n.forEach(function(e,n){for(var a in e.headlines)e.headlines[a].user!=t&&delete e.headlines[a];e.headlines=be(e.headlines),e.postID=s[n]}),e.setState({active:n})});var o=r.map(function(t){return e.props.firebase.getFrozenStoryByID(t)});Promise.all(o).then(function(e){return e.map(function(e){return e.val()})}).then(function(n){n.forEach(function(e,n){for(var a in e.headlines)e.headlines[a].user!=t&&delete e.headlines[a];e.headlines=be(e.headlines),e.postID=r[n]}),e.setState({frozen:n})})}})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h1",null,"active posts "),s.a.createElement(fe,{items:this.state.active,show:100}),s.a.createElement("h1",null,"frozen posts "),s.a.createElement(fe,{items:this.state.frozen,show:100}))}}]),t}(s.a.Component),_e=Object(o.b)(function(e){return{firebase:e.firebase}},function(e){return{gotPosts:function(t){return e(me(t))}}})(Se),Te=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(w.a)(this,Object(C.a)(t).call(this,e))).state={title:"",url:"",source:""},n}return Object(j.a)(t,e),Object(h.a)(t,[{key:"submit",value:function(e){var t=this;e.preventDefault(),this.props.firebase.newArticle(this.state.title,this.state.url,this.state.source).then(function(e){return t.props.history.push("/news")})}},{key:"change",value:function(e){console.log(e),console.log(this.state),this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return s.a.createElement("div",{className:"submit_one"},s.a.createElement("div",{className:"input-name"},"Title"),s.a.createElement("textarea",{onChange:this.change.bind(this),className:"",name:"title",placeholder:"title"}),s.a.createElement("div",{className:"input-name"},"URL"),s.a.createElement("textarea",{onChange:this.change.bind(this),className:"",name:"url",placeholder:"URL"}),s.a.createElement("div",{className:"input-name"},"Source Name"),s.a.createElement("textarea",{onChange:this.change.bind(this),className:"",name:"source",placeholder:"source"}),s.a.createElement("button",{type:"button",onClick:this.submit.bind(this)},"Submit One Article"))}}]),t}(s.a.Component),Ie=Object(S.e)(Object(o.b)(function(e){return{posts:e.posts,categories:e.categories,firebase:e.firebase}})(Te)),De=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(w.a)(this,Object(C.a)(t).call(this,e))).state={item:null},n}return Object(j.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.postID;Promise.all([this.props.firebase.getSubmissionsForPost(t,100),this.props.firebase.getStoryByID(t)]).then(function(t){var n=t[0].val(),a=t[1].val();a.headlines=n?be(n):[],e.setState({item:a})})}},{key:"render",value:function(){if(!this.state.item)return s.a.createElement("div",null,"hi");var e=this.state.item;return s.a.createElement(X,{post:e,show:100})}}]),t}(s.a.Component),xe=Object(o.b)(function(e){return{firebase:e.firebase}})(De),Pe=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(w.a)(this,Object(C.a)(t).call(this,e))).state={url:e.guess_url,title:e.guess_text,source_name:e.source_name||"AP News"},n}return Object(j.a)(t,e),Object(h.a)(t,[{key:"change",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"adminPanel"},s.a.createElement("form",{autoComplete:"off",action:""},s.a.createElement("fieldset",{className:"form-group wrap "+this.props.status},s.a.createElement("div",{className:"input-name"},s.a.createElement("h2",null,this.props.full)),s.a.createElement("textarea",{spellCheck:!1,value:this.state.title,onChange:this.change.bind(this),className:"adminPanel",name:"title"}),s.a.createElement("textarea",{spellCheck:!1,className:"adminPanel",value:this.state.url,onChange:this.change.bind(this),name:"url"}),s.a.createElement("textarea",{spellCheck:!1,className:"adminPanel",value:this.state.source_name,onChange:this.change.bind(this),name:"url"})),s.a.createElement("div",{className:"new-post-buttons"},s.a.createElement("button",{onClick:function(t){t.preventDefault(),e.props.cancel()}},"Cancel"),this.props.categories.map(function(t){return s.a.createElement("button",{key:v.a.v4(),type:"button",onClick:function(n){n.preventDefault(),e.props.save(t,e.state.url,e.state.title,e.state.source_name)}},t)}))))}}]),t}(s.a.Component),Ae="bg1",ze="bg2",Re="bg3",Le=function(e){return s.a.createElement("div",{className:"tweetpreview"},s.a.createElement("p",null,s.a.createElement("strong",null,e.tweet.cat)),s.a.createElement("p",null,e.tweet.title),s.a.createElement("p",null,s.a.createElement("a",{href:e.tweet.url},e.tweet.url)))},Be=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(w.a)(this,Object(C.a)(t).call(this,e))).state={handle:"",tweets:null,to_submit:[],submitting:!1},n}return Object(j.a)(t,e),Object(h.a)(t,[{key:"fetchTweets",value:function(e,t){var n=this,a=function(e){return e.favorite_count};this.props.firebase.getRecentTweets(e,t).then(function(e){return e.data}).then(function(e){return e.sort(function(e,t){return a(t)-a(e)})}).then(function(e){e.forEach(function(e){e.status=Ae,e.id=v.a.v4()}),window.t=e,n.setState({tweets:e})})}},{key:"fetchCustomTweets",value:function(e){e.preventDefault(),this.fetchTweets(this.state.handle,50)}},{key:"handleChange",value:function(e){this.setState({handle:e.target.value})}},{key:"cancel",value:function(e){var t=this.state.tweets;(t=t.slice()).forEach(function(t){t.id===e&&(t.status=Re)}),this.setState({tweets:t})}},{key:"save",value:function(e,t,n,a,s){var r=this.state.tweets;(r=r.slice()).forEach(function(r){r.id===e&&(r.url=n,r.title=a,r.cat=t,r.source_name=s,r.status=ze)}),this.setState({tweets:r})}},{key:"submit",value:function(e){var t=this;e.preventDefault(),this.state.tweets.forEach(function(e){e.status===ze&&t.props.firebase.newArticle(e.title,e.url,e.source_name).then(function(e){return t.props.history.push("/news")})})}},{key:"show",value:function(e){this.setState({submitting:!this.state.submitting})}},{key:"killDB",value:function(){var e=this;this.props.firebase.clearToday().then(function(t){e.props.history.push("/news")})}},{key:"render",value:function(){var e=this,t=["general","sports","politics"];return this.state.submitting?s.a.createElement("div",null,s.a.createElement("button",{style:{margin:"10px"},onClick:function(){return e.props.history.push("/news")}},"Cancel"),s.a.createElement("button",{onClick:this.submit.bind(this)},"submit"),s.a.createElement("button",{onClick:this.show.bind(this)},"edit"),this.state.tweets.filter(function(e){return e.status===ze}).map(function(e){return s.a.createElement(Le,{tweet:e,key:v.a.v4()})})):this.state.tweets?s.a.createElement("div",null,s.a.createElement("button",{style:{margin:"10px"},onClick:function(){return e.props.history.push("/news")}},"Cancel"),s.a.createElement("button",{style:{margin:"10px"},onClick:function(){return e.setState({tweets:null})}},"Clear"),s.a.createElement("button",{onClick:this.show.bind(this)},"show selections"),s.a.createElement("button",{onClick:this.killDB.bind(this)},"kill database"),this.state.tweets.map(function(n){return s.a.createElement(Pe,{categories:t,full:n.full_text,guess_url:n.guess_url,guess_text:n.guess_text,source_name:n.source_name,status:n.status,save:e.save.bind(e,n.id),cancel:e.cancel.bind(e,n.id),key:n.id})})):s.a.createElement("div",null,s.a.createElement(Ie,null),s.a.createElement("form",{onSubmit:this.fetchCustomTweets.bind(this)},s.a.createElement("button",{style:{margin:"10px"},onClick:function(){return e.props.history.push("/news")}},"Cancel"),s.a.createElement("button",{type:"button",style:{margin:"10px"},onClick:function(){return e.fetchTweets("ap",50)}},"Fetch AP Tweets"),s.a.createElement("button",{type:"button",style:{margin:"10px"},onClick:function(){return e.fetchTweets("abc",50)}},"Fetch ABC News Tweets"),s.a.createElement("input",{type:"text",placeholder:"@handle",value:this.state.handle,onChange:this.handleChange.bind(this)}),s.a.createElement("button",{type:"submit"},"Fetch Custom Tweets")),s.a.createElement("button",{style:{margin:"10px"},onClick:this.killDB.bind(this)},"kill database"))}}]),t}(s.a.Component),Fe=Object(S.e)(Object(o.b)(function(e){return{posts:e.posts,categories:e.categories,user:e.user,firebase:e.firebase}})(Be)),Ue=function(e){function t(e){return Object(p.a)(this,t),Object(w.a)(this,Object(C.a)(t).call(this,e))}return Object(j.a)(t,e),Object(h.a)(t,[{key:"logOut",value:function(){this.props.firebase.logOut(),this.props.doLogout()}},{key:"render",value:function(){return s.a.createElement("div",{className:"top"},this.props.show_tour&&s.a.createElement(te,null),s.a.createElement("div",{className:"navigation"},s.a.createElement("div",{className:"name bsnewslogo"},s.a.createElement(N.b,{to:"/"},"Bottom Shelf News")),s.a.createElement("div",{className:"menu-list"},s.a.createElement("ul",{className:"navbar-center"},s.a.createElement("li",{className:"home_top_link"},s.a.createElement(N.b,{to:"/"},"Home")),s.a.createElement("li",{className:"active_top_link"},s.a.createElement(N.b,{to:"/active"},"Active")),s.a.createElement("li",null,s.a.createElement(N.b,{to:"/archive"},"Archive")),s.a.createElement("li",{className:"about_top_link"},s.a.createElement(N.b,{to:"/about"},"About")))),s.a.createElement("div",{className:"menu-list-right"},s.a.createElement("ul",null,s.a.createElement("li",null,this.props.user?s.a.createElement(N.b,{to:"/user/"+this.props.uid},this.props.user.displayName||"anonymous"):s.a.createElement(N.b,{to:"/signup"},"Register")),s.a.createElement("li",null,this.props.user?s.a.createElement("button",{type:"button",onClick:this.logOut.bind(this)},"log out"):s.a.createElement(N.b,{to:"/login"},"Log In"))))),s.a.createElement("h1",{className:"news_header"}," Bottom Shelf News "),s.a.createElement("h2",{className:"news_header"}," A comedy newspaper where the users write the headlines."),s.a.createElement(S.a,{exact:!0,path:"/",component:Ce}),s.a.createElement(S.a,{path:"/active",component:Oe}),s.a.createElement(S.a,{path:"/archive",component:ge}),s.a.createElement(S.a,{path:"/about",component:oe}),s.a.createElement(S.a,{path:"/login",component:ue}),s.a.createElement(S.a,{path:"/signup",component:he}),s.a.createElement(S.a,{path:"/detail/:postID",component:xe}),s.a.createElement(S.a,{path:"/category/:category",component:Ne}),s.a.createElement(S.a,{path:"/user/:user",component:_e}),s.a.createElement(S.a,{path:"/new",component:Ie}),s.a.createElement(S.a,{path:"/admin",component:Fe}))}}]),t}(s.a.Component);var Me=Object(o.b)(function(e,t){return{show_tour:e.show_tour,firebase:e.firebase,user:e.user,uid:e.user?e.user.uid:null}},function(e){return{doLogout:function(){return e({type:"LOGOUT_ACTION"})}}})(Ue),We=function(e){function t(){return Object(p.a)(this,t),Object(w.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return s.a.createElement(N.a,null,s.a.createElement(Me,null))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(79);i.a.render(s.a.createElement(o.a,{store:k},s.a.createElement(We,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[51,1,2]]]);
//# sourceMappingURL=main.915a9e61.chunk.js.map