{"version":3,"sources":["actions/loginAction.js","Firebase.js","store.js","Landing.js","Login.js","Signup.js","actions/gotPostsAction.js","actions/deleteAction.js","actions/deleteSubmissionAction.js","actions/editAction.js","Rewrite.js","Item.js","ItemList.js","util/sortHeadlines.js","NewsHome.js","Newspaper.js","Category.js","UserPage.js","articles.js","NewPost.js","Detail.js","AdminVerifyStory.js","AdminPanel.js","TopBar.js","App.js","serviceWorker.js","index.js"],"names":["loginAction","user","type","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","date","Date","toJSON","slice","yesterday","setDate","getDate","Firebase","_this","this","Object","classCallCheck","createUser","email","pass","name","auth","createUserWithEmailAndPassword","then","res","updateProfile","displayName","login","signInAnonymously","admin","signInWithEmailAndPassword","getIdTokenResult","token","claims","console","log","logOut","signOut","resetPass","sendPasswordResetEmail","updatePass","newPass","currentUser","updatePassword","newArticle","title","url","category","old","newPost","db","ref","push","d","set","newHeadline","storyID","headline","newHeadlineKey","key","uid","updates","username","votes","defineProperty","story","update","fakeVotes","postID","headlineID","count","post","i","fakeUID","uuid","v4","substr","up","Math","random","vote","v","getTopPosts","orderByChild","equalTo","once","getSubmissionsByUser","getSubmissionByID","subID","getStorySubmissionByID","storyAndSubID","getStoryByID","getRecentTweets","handle","num","params","functions","httpsCallable","deleteStory","getSubmissionsForPost","val","headlines","hl","clearToday","posts","keys","postIDs","Promise","all","map","app","initializeApp","database","unsub","onAuthStateChanged","result","store","dispatch","submissionID","userID","deleteOneHeadlineFromPosts","p","forEach","filter","createStore","state","action","objectSpread","data","oldPost","newTitle","newURL","firebase","categories","Landing","props","setLogin","history","react_default","a","createElement","className","react_router_dom","to","onClick","guestLogin","bind","React","Component","connect","LoginForm","possibleConstructorReturn","getPrototypeOf","call","error","event","_this2","preventDefault","setState","catch","target","value","_this3","welcome","onSubmit","submit","onChange","change","message","Connected","Login","withRouter","SignupForm","authUser","SignupPage","gotPostsAction","deleteAction","deleteSubmissionAction","editAction","Rewrite","rw","canVote","canDelete","score","style","marginLeft","buttons","delete","deleteSubmission","err","Item","show","newkey","newhl","concat","length","temp","values","reduce","cur","deleteSuccess","orTitle","src_Rewrite","Item_NewSubmission","Item_DeleteStory","id","DeleteStory","_useState","useState","_useState2","slicedToArray","confirm","setConfirm","NewSubmission","_useState3","_useState4","inEdit","setInEdit","Item_Editor","cancel","Editor","text_ref","createRef","width","height","current","deleteSubmissionSuccess","editSuccess","ItemList","items","item","src_Item","timestamp","sortHeadlines","submissions","sort","b","NewsHome","stories","postsObject","subs","k","results","r","sub","index","s","gotPosts","e","src_ItemList","Newspaper","Category","show_category","UserPage","postsAndUserSubmissions","match","storiesWithUserSubs","story_keys","subPromises","flat","path","toString","split","story_promises","story_data","articles","isValidURL","str","NewPost","_ref","cat","_this4","_this5","selector","_this6","autoComplete","autoFocus","placeholder","Detail","AdminVerifyStory","guess_url","guess_text","status","full","spellCheck","ev","save","Status","TweetPreview","tweet","href","AdminPanel","tweets","to_submit","submitting","favorite_count","t1","t2","fetchTweets","t","margin","AdminPanel_TweetPreview","killDB","src_AdminVerifyStory","full_text","fetchCustomTweets","handleChange","ownProps","disp","doLogout","window","u","react_router","exact","component","Signup","App","src_TopBar","Boolean","location","hostname","ReactDOM","render","es","configureStore","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.3879fa83.chunk.js","sourcesContent":["let loginAction = (user) => ({type: 'LOGIN_ACTION', user: user});\n\nexport default loginAction;\n","import app from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\nimport 'firebase/functions';\nimport store from './store';\nimport loginAction from './actions/loginAction';\nimport uuid from 'uuid';\n\n  var firebaseConfig = {\n    apiKey: \"AIzaSyD9hWSw27OO_qk9eRKm2TMJ_09JcdeZdm8\",\n    authDomain: \"bottomshelfnews.firebaseapp.com\",\n    databaseURL: \"https://bottomshelfnews.firebaseio.com\",\n    projectId: \"bottomshelfnews\",\n    storageBucket: \"\",\n    messagingSenderId: \"924993359943\",\n    appId: \"1:924993359943:web:99b6abdc71d38c4316e162\",\n    measurementId: \"G-LRJS1QWZZR\"\n  };\n\nlet date = () => (new Date()).toJSON().slice(0,10);\n\n// 'production' means demo on bottonshelfnews.github.io, frozen to Jan 8th\nif (process.env.NODE_ENV === 'production') {\n\tdate = () => \"2020-01-08\";\n}\nlet yesterday = () => \n\t(new Date(new Date().setDate(new Date().getDate()-1))).toJSON().slice(0,10);\n\nclass Firebase {\n\t// onAuthStateChange is a funciton called whenever a successful login/out occurs\n\tconstructor() {\n\t\tapp.initializeApp(firebaseConfig);\n\t\tthis.auth = app.auth();\n\t\tthis.db = app.database();\n\t\tthis.functions = app.functions();\n\t\t// handle user being already logged in\n\t\tthis.unsub = this.auth.onAuthStateChanged(user=>{\n\t\t\tif (user) {\n\t\t\t\tuser.getIdTokenResult().then(result=>{\n\t\t\t\t\tuser.admin = !!result.claims.admin; // set user.admin property for easier access\n\t\t\t\t\tstore.dispatch(loginAction(user));\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.unsub(); //unsubscribe to auth change - only want this to run once \n\t\t});\n\t}\n\n\temail() {\n\t\treturn this.auth.currentUser ? this.auth.currentUser.email : null;\n\t}\n\n\tcreateUser = (email, pass, name) => {\n\t\treturn this.auth.createUserWithEmailAndPassword(email,pass)\n\t\t.then(res=> res.user.updateProfile({displayName:name}));\n\t}\n\n\tlogin = (email, pass)=> {\n\t\tif (!email || !pass) {\n\t\t\treturn this.auth.signInAnonymously()\n\t\t\t.then(res=>res.user)\n\t\t\t.then(user=>{\n\t\t\t\tuser.admin=false;\n\t\t\t\treturn user;\n\t\t\t});\n\t\t}\n\t\tlet user = null;\n\t\treturn this.auth.signInWithEmailAndPassword(email, pass)\n\t\t.then(res=>{\n\t\t\tuser = res.user;\n\t\t\treturn user.getIdTokenResult();\n\t\t})\n\t\t.then(token=>{\n\t\t\tuser.admin = token.claims.admin;\n\t\t\tconsole.log(user);\n\t\t\treturn user;\n\t\t})\n\t}\n\n\tlogOut = ()=> {\n\t\treturn this.auth.signOut();\n\t}\n\n\tresetPass = (email) => {\n\t\treturn this.auth.sendPasswordResetEmail(email);\n\t}\n\n\tupdatePass = (newPass) => {\n\t    return this.auth.currentUser.updatePassword(newPass);\n\t}\n\n\t//TODO get rid of old\n\tnewArticle = (title,url,category, old) => {\n\t\tif (!this.auth.currentUser) return; //should not happen\n\t\tlet posts = this.db.ref(\"stories\");\n\t\tlet newPost = posts.push();\n\t\t// TODO add timestamp maybe? encoded in fb auto-generated key but cryptic\n\t\tlet d = old ? yesterday() : date();\n\t\treturn newPost.set( {\n\t\t\ttitle:title,\n\t\t\turl:url,\n\t\t\tcategory:category,\n\t\t\tdate: d\n\t\t});\n\t}\n\n\tnewHeadline = (storyID,headline) => {\n\t\tif (!this.auth.currentUser) return; //should not happen\n\t\t// TODO  This was originally storysubmissions/storyID/newkey\n\t\t// Moved to submissions to guarantee uniqueness - needed??\n\t\tlet post = this.db.ref(\"submissions/\");\n\t\tlet newHeadlineKey = post.push().key;\n\t\tlet uid = this.auth.currentUser.uid;\n\t\tlet name = this.auth.currentUser.displayName;\n\t\tlet updates = {};\n\n\t\t// Logging user's vote in 2 places: /submissions and /users \n\n\t\tupdates['/storysubmissions/' + storyID + '/' + newHeadlineKey] =\n\t\t\t{headline:headline, user:uid, username:name, votes: {[uid]:true}, key:newHeadlineKey};\n\n\t\tupdates['/storysubmissions/' + storyID + '/' + newHeadlineKey] =\n\t\t\t{headline:headline, user:uid, username:name, votes: {[uid]:true}, key:newHeadlineKey};\n\t\t\t\n\t\tupdates['/users/' + uid + '/stories/' + storyID + '/submissions/' + newHeadlineKey ] = true;\n\n\t\tupdates['/submissions/' + newHeadlineKey] = \n\t\t\t{headline:headline, user:uid, username:name, key:newHeadlineKey, story:storyID};\n\n\t\tthis.db.ref().update(updates);\n\t\treturn newHeadlineKey;\n\t}\n\n\tfakeVotes = (postID, headlineID, count) => {\n\t\tlet post = this.db.ref(\"items/\" + postID + \"/submissions/\" + headlineID + \"/votes\");\n\t\tlet updates = {};\n\t\tfor (var i=0;i<count;i++) {\n\t\t\tvar fakeUID = uuid.v4().substr(0,10);\n\t\t\tvar up = Math.random() >= 0.3;\n\t\t\tupdates[fakeUID] = up;\n\t\t}\n\t\tpost.update(updates);\n\t}\n\n\t// v can be true, false or null\n\tvote = (storyID, headlineID, v) => {\n\t\tif (!this.auth.currentUser) return; //should not happen\n\t\t//console.log(this.auth.currentUser, postID, headlineID);\n\t\tlet post = this.db.ref(\"storysubmissions/\" + storyID + \"/\" + headlineID + \"/votes\");\n\t\tlet uid = this.auth.currentUser.uid;\n\t\tpost.update({[uid]:v});\n\t}\n\n\tgetTopPosts = () => {\n\t\t/* TODO: Filter to most recent 10ish? */\n\t\tlet stories = this.db.ref('stories')\n\t\t.orderByChild('date')\n\t\t.equalTo(date())\n\t\t.once('value');\n\t\treturn stories;\n\t}\n\n\t//TODO IMPORTANT: When you update this to use num, no num arg = all subs\n\tgetSubmissionsForPost(postID, num) {\n\t\treturn this.db.ref('storysubmissions/' + postID).once('value');\n\t}\n\n\tgetSubmissionsByUser = (uid) => {\n\t\t// Get a list of {postID:subID} for all user submissions\n\t\treturn this.db.ref('users/' + uid).once('value');\n\t}\n\n\tgetSubmissionByID = (subID) => {\n\t\t// Get a list of {postID:subID} for all user submissions\n\t\treturn this.db.ref('/submissions/' + subID).once('value');\n\t}\n\n\t// storyAndSubID looks like \"storyID/subID\"\n\tgetStorySubmissionByID = (storyAndSubID) => {\n\t\treturn this.db.ref('/storysubmissions/' + storyAndSubID).once('value');\n\t}\n\n\tgetStoryByID = (postID) => {\n\t\t// Get a list of {postID:subID} for all user submissions\n\t\treturn this.db.ref('/stories/' + postID).once('value');\n\t}\n\n\t// TODO num is not implemented on server, fetches 50(?) by default\n\tgetRecentTweets = (handle, num) => {\n\t\tlet params = {handle:handle};\n\t\treturn this.functions.httpsCallable('topNews')(params);\n\t}\n\n\t// this deletes a story including all associated headline submissions\n\tdeleteStory = (storyID) => {\n\t\tlet updates = {};\n\t\tupdates['stories/' + storyID] = null;\n\t\tupdates['storysubmissions/' + storyID] = null;\n\t\tconsole.log(updates);\n\t\treturn this.getSubmissionsForPost(storyID)\n\t\t.then(res=>res.val())\n\t\t.then(headlines => {\n\t\t\tfor (var hl in headlines){\n\t\t\t\tlet user = headlines[hl].user;\n\t\t\t\tupdates['submissions/' + hl] = null;\n\t\t\t\tupdates['users/' + user + '/stories/' + storyID] = null;\t\n\t\t\t}\n\t\t\tconsole.log(updates);\n\t\t\treturn this.db.ref().update(updates);\n\t\t});\n\t}\n\n\tdeleteSubmission(storyID, submissionID, userID) {\n\t\tlet updates = {};\n\t\tupdates['storysubmissions/' + storyID + '/' + submissionID] = null;\n\t\tupdates['submissions/' + submissionID] = null;\n\t\tupdates['users/' + userID + '/stories/' + storyID+'/submissions/' + submissionID] = null;\n\t\treturn this.db.ref().update(updates);\n\t}\n\n\t// this deletes everything added to the database today\n\tclearToday = () => {\n\t\treturn this.getTopPosts()\n\t\t.then(res=>res.val())\n\t\t.then(res=>{\n\t\t\tconsole.log(res);return res;\n\t\t})\n\t\t.then(posts=>Object.keys(posts || {}))\n\t\t.then(postIDs=>  Promise.all(postIDs.map(this.deleteStory)));\n\t}\n}\n\nexport default Firebase;","import { createStore } from 'redux';\nimport Firebase from './Firebase';\n\nfunction mainReducer(state, action) {\n\tswitch (action.type) {\n\t\tcase 'LOGIN_ACTION':\n\t\t\treturn {...state, user:action.user};\n\t\tcase 'LOGOUT_ACTION':\n\t\t\treturn {...state, user:null, userID:null};\n\t\tcase 'GOT_POSTS_ACTION':\n\t\t\treturn {...state, posts:action.data};\n\t\tcase 'DELETE_SUBMISSION_ACTION':\n\t\t\treturn {...state, posts: deleteOneHeadlineFromPosts(state.posts,action.postID, action.subID)};\n\t\tcase 'DELETE_ACTION':\n\t\t\treturn {...state, posts: state.posts.filter(post=>post.postID!==action.postID)};\n\t\tcase 'EDIT_ACTION':\n\t\t\tconsole.log(state);\n\t\t\treturn {...state, posts: state.posts.map(oldPost => \n\t\t\t\toldPost.postID!==action.postID ? oldPost \n\t\t\t\t : {...oldPost, title:action.newTitle, url:action.newURL}\n\t\t\t)};\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n// TODO: move this to another file, try to do without mutations? \n// we have to copy the posts array, returning the same object does not force a state change\nlet deleteOneHeadlineFromPosts = (posts, postID, subID) => {\n\tlet p = posts.slice();\n\tp.forEach(post=>{\n\t\tif (post.postID===postID) {\n\t\t\tconsole.log(post.headlines);\n\t\t\tpost.headlines=post.headlines.filter(hl=>hl.key!==subID);\n\t\t\tconsole.log(post.headlines);\n\t\t}\n\t});\n\treturn p;\n}\nfunction defaultState() {\n\treturn {\n\t\tuser: null,\n\t\tposts:[],\n\t\tfirebase: new Firebase(),\n\t\tcategories: ['general','sports','politics']\n\t}\n}\nexport default createStore(\n  mainReducer,\n  defaultState()\n );\n\n","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport loginAction from './actions/loginAction'\nclass Landing extends React.Component {\n\n\tguestLogin() {\n\t\tthis.props.firebase.login(null,null).then(user=>{\n\t\t\tthis.props.setLogin(user);\n\t\t\tthis.props.history.push(\"/\");\t\n\t\t});\n\t}\n\trender() {\n\t\treturn (\n\t  <div className=\"container-fluid landing\">\n\t    <div className=\"row\">\n      \t\t<div className=\"col-lg-6\">\n\t\t\t\t<h3>\n\t\t\t\t\tBottom Shelf News is a crowd-sourced comedy news site!\n\t\t\t\t</h3>\n\t\t\t\t<p>\n\t\t\t\t\tThe blue links are the titles of today's top news stories. \n\t\t\t\t\tThe black headlines are our user's funniest alternatives. \n\t\t\t\t\tYou can vote on your favorite submission, or write your own!\n\t\t\t\t</p>\n\n\n\t\t\t\t<p>\n\t\t\t\t\tBottom Shelf News is in development, This demo page provides a preview of it's core functionality.\n\t\t\t\t\tYou can view <Link to=\"/news\">headlines and submissions</Link> now, \n\t\t\t\t\tor <Link to=\"/login\">Log In</Link> to vote and submit! \n\t\t\t\t</p>\n\n\t\t\t\t<p>\n\t\t\t\t\tIf you don't want to make an account, you can \n\t\t\t\t\t<button onClick={this.guestLogin.bind(this)}>continue as a guest</button>\n\t\t\t\t\t. Guest accounts have full access to Bottom Shelf News features, \n\t\t\t\t\tbut if you log out and return you won't be able to access the account again.\n\t\t\t\t</p>\n\n\t\t\t\t<p>\n\t\t\t\t\tBecause this is a demo, you can also view an admin-only feature.\n\t\t\t\t\tTo populate the site with daily articles, the <Link to=\"/admin\"> admin control panel </Link> \n\t\t\t\t\tallows privileged users to automatically fetch tweets from popular news accounts on Twitter \n\t\t\t\t\tand batch-submit them.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\tBecause you are (probably) not a bottomshelfnews.com administrator, \n\t\t\t\t\tyou won't be able to actually submit the stories to the database, but you can view the functionality of the feature! \n\t\t\t\t\tPlease <button onClick={this.guestLogin.bind(this)}>log in as a guest</button> before viewing the admin panel.\n\t\t\t\t</p>\n\n      </div>\n    </div>\n  </div> );\n\n\t}\n}\nlet mstp = (state) => ({firebase:state.firebase});\nlet mdtp = (dispatch) => (  {setLogin : (user) => dispatch(loginAction(user)) }  );\nexport default connect(mstp,mdtp)(Landing);","import React from 'react';\nimport {Link, withRouter} from 'react-router-dom';\nimport loginAction from './actions/loginAction';\nimport {connect} from 'react-redux';\n\nclass LoginForm extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {email:\"\", pass:\"\", error:null};\n\t}\n\tsubmit(event) {\n\t\tevent.preventDefault();\n\t\tthis.props.firebase.login(this.state.email, this.state.pass)\n\t\t\t.then(user=>{\n\t\t\t\tthis.setState({email:\"\",pass:\"\"});\n\t\t\t\tthis.props.setLogin(user);\n\t\t\t\tthis.props.history.push(\"/\");\t\n\t\t\t})\n\t\t\t.catch(error=>{\n\t\t\t\t//this.setState({error:error});\n\t\t\t});\n\t}\n\n\tchange(event) {\n\t\tthis.setState({[event.target.name]:event.target.value});\n\t}\n\n\tguestLogin() {\n\t\tthis.props.firebase.login(null,null).then(user=>{\n\t\t\tthis.props.setLogin(user);\n\t\t\tthis.setState({email:\"\",pass:\"\", welcome:true});\n\t\t\tthis.props.history.push(\"/\");\t\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t<form className=\"form-group col-6\" onSubmit={this.submit.bind(this)}>\n\t\t\t<label> Email: </label>\n\t\t\t<input name=\"email\" className=\"form-control\" value={this.state.email} onChange={this.change.bind(this)}/>\n\t\t\t<label> Password: </label>\n\t\t\t<input type=\"password\" name=\"pass\" className=\"form-control\" value={this.state.pass} onChange={this.change.bind(this)}/>\n\t\t\t<p></p>\n\t\t\t<button className=\"form-control\">submit</button>\n\t\t\t{this.state.error? <p>{this.state.error.message}</p> : null }\n\t\t\t<p>Don't have an account? <Link to='/signup'> Sign Up! </Link></p>\n\t\t\t<button type=\"button\" className=\"form-control\" onClick={this.guestLogin.bind(this)}>Continue as Guest</button>\n\t\t</form>);\n\t}\n}\nlet mapStateToProps = function(state) {return {...state}};\nlet mapDispatchToProps = function(dispatch) {\n\treturn {\n\t\tsetLogin : (user) => dispatch(loginAction(user))\n\t};\n}\nlet Connected = connect(mapStateToProps, mapDispatchToProps)(LoginForm);\nconst Login = withRouter(Connected);\nexport default Login;","import React from 'react';\nimport {withRouter} from 'react-router-dom';\nimport {connect} from 'react-redux';\nclass SignupForm extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {email:\"\", pass:\"\", displayName:\"\"};\n\t}\n\tsubmit(event) {\n\t\tevent.preventDefault();\n\t\tconsole.log(\"submit\");\n\t\tconsole.log(this.props.firebase);\n\t\tthis.props.firebase\n\t\t\t.createUser(this.state.email, this.state.pass, this.state.displayName)\n\t\t\t\t.then(authUser => {\n\t\t\t\t\tconsole.log(\"signup success\");\n\t\t\t\t\tthis.setState({email:\"\", pass:\"\", error:null});\n\t\t\t\t\tthis.props.history.push(\"/home\");\n\t\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\t\tthis.setState({ error });\n\t\t\t\t});\n\t}\n\tchange(event) {\n\t\tthis.setState({[event.target.name]:event.target.value});\n\t}\n\trender() {\n\t\treturn (\n\t\t<div className=\"container\">\n\t\t\t<div className=\"row\">\n\t\t\t<h3 className=\"col-sm-6 text-center\">Register New Account</h3>\n\t\t\t</div> \n\t\t\t<form className=\"form-group col-6\" onSubmit={this.submit.bind(this)}>\n\t\t\t\t<label> Display Name: </label>\n\t\t\t\t<input name=\"displayName\" className=\"form-control\" value={this.state.displayName} onChange={this.change.bind(this)}/>\n\t\t\t\t<label> Email: </label>\n\t\t\t\t<input name=\"email\" className=\"form-control\" value={this.state.email} onChange={this.change.bind(this)}/>\n\t\t\t\t<label> Password: </label>\n\t\t\t\t<input type=\"password\" name=\"pass\" className=\"form-control\" value={this.state.pass} onChange={this.change.bind(this)}/>\n\t\t\t\t<p></p>\n\t\t\t\t<button className=\"form-control\">submit</button>\n\t\t\t</form>\n\t\t\t{this.state.error? \n\t\t\t\t<div>\n\t\t\t\t\t<h5>error!</h5>\n\t\t\t\t\t{this.state.error.message}\n\t\t\t\t</div> \n\t\t\t: null}\n\t\t</div>);\n\t}\n}\nlet mapStateToProps = (state) => ({firebase:state.firebase});\nconst SignupPage = connect(mapStateToProps)(withRouter(SignupForm));\nexport default SignupPage;","let gotPostsAction = (posts) => ({type:\"GOT_POSTS_ACTION\", data:posts});\nexport default gotPostsAction;","let deleteAction = (postID) => ({type: 'DELETE_ACTION', postID: postID});\n\nexport default deleteAction;\n","let deleteSubmissionAction = (postID, subID) => ({type: 'DELETE_SUBMISSION_ACTION', postID: postID, subID:subID});\n\nexport default deleteSubmissionAction;\n","let editAction = (postID,title,url) => (\n\t{\n\t\ttype: 'EDIT_ACTION', \n\t\tpostID: postID, \n\t\tnewTitle:title, \n\t\tnewURL:url\n\t}\n);\n\nexport default editAction;","import React from 'react';\nimport {connect} from \"react-redux\";\nimport {Link} from \"react-router-dom\";\nclass Rewrite extends React.Component {\n\trender() {\n\t\t\n\t\tlet canVote = !!this.props.user;\n\n\t\tlet vote = 0;\n\t\tif (canVote && this.props.rw.votes[this.props.user.uid] === true) {\n\t\t\tvote = 1;\n\t\t}\n\t\telse if (canVote && this.props.rw.votes[this.props.user.uid] === false){\n\t\t\tvote = -1;\n\t\t}\n\n\t\tlet canDelete = canVote && this.props.user.uid===this.props.rw.user;\n\n\t\treturn (\n\t\t  <div>\n\t\t  \t<div className='headlinebar'>\n\t\t\t    <span>{\"(\"+this.props.rw.score+\")  \"}</span>\n\t\t\t    <span>{this.props.rw.headline}</span>\n\t\t\t</div>\n\t\t  \t<div className='headlineinfo'>\n\t\t  \t\t<Link to={'/user/'+this.props.rw.user}>{this.props.rw.username}</Link>\n\t\t\t    {canVote &&\n\t\t    \t\t<span style={{marginLeft:'4px'}} >\n\t\t    \t\t\t<span>Vote!</span>\n\t\t    \t\t\t{this.buttons(vote)}\n\t\t\t    \t</span>\n\t\t\t    }\n\t\t\t    {canDelete && \n\t\t    \t\t<span style={{marginLeft:'4px'}} >\n\t\t    \t\t\t<button type='button' onClick={this.delete.bind(this)}>delete</button>\n\t\t\t    \t</span>\n\t\t\t    }\n\t\t\t</div>\n\t\t</div>\n\t\t);\n\t}\n\tdelete() {\n\t\tthis.props.firebase.deleteSubmission(this.props.postID, this.props.rw.key, this.props.rw.user)\n\t\t.then(res=>{\n\t\t\tthis.props.delete(this.props.rw.key);\n\t\t})\n\t\t.catch(err=>console.log('error:' + err));\n\t}\n\tbuttons(vote) {\n\t\tif (vote===0) {\n\t\t\treturn (\n\t\t\t<span>\t\n\t\t\t\t<button onClick={()=>this.vote(true)} className='vote-button'>+</button>\n\t\t\t\t<button onClick={()=>this.vote(false)} className='vote-button'>-</button>\n\t\t\t</span>);\n\t\t}\t\n\t\telse if (vote===1) {\n\t\t\treturn (\n\t\t\t<span>\t\n\t\t\t\t<button onClick={()=>this.vote(null)} className='vote-button voted' >+</button>\n\t\t\t\t<button onClick={()=>this.vote(false)} className='vote-button'>-</button>\n\t\t\t</span>);\n\t\t}\n\t\telse {\n\t\t\treturn (\n\t\t\t<span>\t\n\t\t\t\t<button onClick={()=>this.vote(true)} className='vote-button'>+</button>\n\t\t\t\t<button onClick={()=>this.vote(null)} className='vote-button voted'>-</button>\n\t\t\t</span>);\n\t\t}\n\t}\n\tvote = (v) => {\n\t\tthis.props.firebase.vote(this.props.postID, this.props.rw.key, v);\n\t\tthis.props.vote(v)\n\t}\n}\n\nlet mstp = state=>({\n\tfirebase:state.firebase, \n\tuser: state.user\n});\n\nexport default connect(mstp)(Rewrite);\n","import React, {useState} from \"react\";\nimport {connect} from \"react-redux\";\nimport {Link} from 'react-router-dom';\nimport deleteAction from './actions/deleteAction';\nimport deleteSubmissionAction from './actions/deleteSubmissionAction';\nimport editAction from './actions/editAction';\nimport Rewrite from './Rewrite';\nimport {withRouter} from 'react-router-dom';\nimport uuid from 'uuid';\n\n\nclass Item extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {headlines:this.props.headlines.slice(0,this.props.show)};\n  }\n\n  submit(title) {\n    if (!title) return;\n    let newkey = this.props.firebase.newHeadline(this.props.postID, title);\n    let newhl = {headline:title, \n                 user:this.props.user.uid, \n                 username:this.props.user.displayName, \n                 key:newkey,\n                 score:1,\n                 votes: {[this.props.user.uid]:true}};\n    this.setState({headlines:this.state.headlines.concat([newhl])});\n  }\n\n  vote(headlineID, v) {\n    let newhl = this.state.headlines.slice(0);\n    for (var i=0; i<this.state.headlines.length; i++) {\n      if (this.state.headlines[i].key === headlineID) {\n        let temp = this.state.headlines[i];\n        temp.votes[this.props.user.uid] = v;\n        let reducer = (score, cur)=> score + (cur===true?1:(cur===false?-1:0));\n        let score = Object.values(temp.votes).reduce(reducer,0);\n        temp.score=score;\n        newhl[i] = temp;\n      }\n    }\n    this.setState({headlines:newhl});\n  }\n  delete(postID) {\n    this.props.firebase.deleteStory(postID)\n    .then(()=>{\n      this.props.deleteSuccess(postID);\n      this.props.history.push('/news');\n    });\n  }\n  deleteSubmission(subID) {\n    this.setState({headlines: this.state.headlines.filter(hl=>hl.key!==subID)});\n  }\n  render() {\n    return (\n      <li className='news-item'>\n\n        <p>\n          <Link to={'/detail/' + this.props.postID} className='original-title' >{this.props.orTitle}</Link>\n        </p>\n\n        {this.state.headlines.map(headline =>\n            <Rewrite\n              key={uuid.v4()}\n              className=\"best-rewrite\" \n              postID={this.props.postID} \n              rw={headline}\n              vote={this.vote.bind(this, headline.key) }\n              delete={this.deleteSubmission.bind(this)}\n            />\n          )  }\n        \n        {this.props.user && \n          <NewSubmission submit={this.submit.bind(this)}/>  }\n\n        {this.props.user && this.props.user.admin && \n          <DeleteStory id={this.props.postID} delete={this.delete.bind(this)} /> }\n\n      </li>\n     );\n  }\n}\n\nlet DeleteStory = (props) => {\n  let [confirm, setConfirm] = useState(false);\n  return (\n    <div>\n      {\n        confirm? \n          <div>\n          <button type='button' onClick={()=>props.delete(props.id)}>Confirm</button>\n          <button type='button' onClick={()=>setConfirm(false)}>Cancel</button>\n          </div>\n        : <button type='button' onClick={()=>setConfirm(true)}>Delete Story</button>\n      }\n    </div>\n  )\n}\n\nlet NewSubmission = (props) => {\n  let [inEdit, setInEdit] = useState(false);\n  return (\n    <div>\n      {\n        inEdit? <Editor submit={props.submit} cancel={()=>setInEdit(false)} /> \n        : <button onClick={()=>setInEdit(true)}>New Submission</button>\n      }\n    </div>\n  )\n}\n\nlet Editor = props=> {\n  let text_ref = React.createRef();\n  return (\n      <div>\n        <fieldset>\n          <textarea ref={text_ref} name='title' style={{width:'80%', height: '2em'}} />\n        </fieldset>\n        <button onClick={()=>{props.submit(text_ref.current.value);props.cancel();}}>Submit</button>\n        <button onClick={props.cancel}>Cancel</button>\n      </div>\n    );\n}\n\nlet mstp = state=>({\n  firebase:state.firebase,\n  user: state.user,\n});\nlet mdtp = dispatch =>({\n  deleteSuccess: (id)=> dispatch(deleteAction(id)),\n  deleteSubmissionSuccess: (storyID, submissionID)=> dispatch(deleteSubmissionAction(storyID, submissionID)),\n  editSuccess: (id,title,url)=>dispatch(editAction(id,title,url))\n});\nexport default withRouter(connect(mstp,mdtp)(Item));","import uuid from 'uuid';\nimport React from 'react';\nimport Item from './Item';\n//import {connect} from 'react-redux';\n\n/* TODO:\n  Right now creating Items with the props I will send once data is organzied how I want.\n  First change here, then elsewhere\n  News Item consists of:\n  Original Title\n  URL\n  Best Rewriting\n  Other Rewritings (2)\n*/\nconst ItemList = (props) => {\n  return (\n    <div>\n      <ul className = 'links'>\n        {props.items.map(item =>\n         <Item \n            key={uuid.v4()} \n            postID = {item.postID}\n            category={item.category} \n            orTitle={item.title} \n            timestamp={item.timestamp}\n            headlines={item.headlines}\n            show={props.show?props.show:4}\n            url={item.url} \n         />\n        )}\n      </ul>\n    </div>\n  );\n  }\n//NOTE: mstp removed, can restore\nexport default ItemList;","let sortHeadlines = (submissions) => {\n\t//console.log(submissions);\n\tif (!submissions) return [];\n\tlet headlines = Object.keys(submissions)\n\t.map(key=>{\n\t\tlet headline = submissions[key]\n\t\tlet reducer = function(score, cur) {\n\t\t\tif (cur) return score+1;\n\t\t\telse if (cur===false) return score-1;\n\t\t\treturn score;\n\t\t}\n\t\tif (!headline.votes) headline.votes = [];\t\n\t\tlet score = Object.values(headline.votes).reduce(reducer,0);\n\t\theadline.score=score;\n\t\theadline.key=key;\n\t\treturn headline;\n\t});\n\theadlines.sort( (a,b)=>b.score-a.score);\n\treturn headlines;\n}\nexport default sortHeadlines;\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport gotPostsAction from './actions/gotPostsAction';\nimport ItemList from './ItemList';\nimport sortHeadlines from './util/sortHeadlines';\nimport {Link} from 'react-router-dom';\n\nclass NewsHome extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t// 'stories' is array of keys, ordered\n\t\t// submissions is key:subs\n\t\tthis.state = {submissions:null}\n\t}\n\t// we use DidMount for initial API call\n\tcomponentDidMount() {\n\t\tlet stories = null; // save story data as a [key:data] object\n\t\tlet keys = null;  // save story keys in sorted order\n\t\tthis.props.firebase.getTopPosts()\n\t\t.then(res=>res.val())\n\t\t.then(postsObject=> {\n\t\t\tif (!postsObject) return;\n\t\t\tstories = postsObject;\n\t\t\tkeys = Object.keys(postsObject);\n\t\t\tlet subs = keys.map(k=>this.props.firebase.getSubmissionsForPost(k));\n\t\t\treturn Promise.all(subs);\n\t\t})\n\t\t.then(results => results.map(r=>r.val()))\n\t\t.then(submissions=>{\n\t\t\tlet subs = submissions.map( (sub,index) => {\n\t\t\t\treturn {[keys[index]]:sub};\n\t\t\t});\n\t\t\tlet posts = keys.map((key,index) => {\n\t\t\t\tlet s = stories[key];\n\t\t\t\ts.postID=key;\n\t\t\t\tif (subs[index]) {\n\t\t\t\t\tlet headlines = subs[index][Object.keys(subs[index])[0]];\n\t\t\t\t\ts.headlines = sortHeadlines(headlines);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ts.headlines = [];\n\t\t\t\t}\n\t\t\t\treturn s;\n\t\t\t});\n\t\t\tthis.props.gotPosts(posts);\n\t\t})\n\t\t.catch(e=>{\n\t\t\tconsole.log(e);\n\t\t\tthis.props.gotPosts([]);\n\t\t});\n\t}\n\n\trender() {\n\t\treturn  (\n\t\t\t<div>\n\t\t\t\t<h2>News Articles</h2>\n\t\t        {this.props.firebase.auth.currentUser? <p><Link to='/new'>Submit Article  </Link></p> : null }\n\t\t        {this.props.firebase.auth.currentUser? <p><Link to='/admin'>Admin Panel</Link></p> : null }\n\t\t\t\t<ItemList items={this.props.posts} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nlet mstp = state => {\n\treturn {\n\t\tfirebase:state.firebase,\n\t\tposts:state.posts};\n}\nlet mdtp = dispatch => ({\n\tgotPosts: (posts) => {dispatch(gotPostsAction(posts));}\n})\nexport default connect(mstp, mdtp)(NewsHome);\n","import React from 'react';\n\nclass Newspaper extends React.Component { \n    render() {\n        return (\n<div className=\"newspaper\">\n\t<h1>Bottom Shelf News</h1>\n</div>);\n    }\n}\nexport default Newspaper;","import React from 'react';\nimport ItemList from './ItemList';\nimport gotPostsAction from './actions/gotPostsAction';\nimport {connect} from 'react-redux';\n\nclass Category extends React.Component {\n\tcomponentDidMount() {\n\t\t//let category = this.props.match.params.category;\n\t\t/*\n\t    axios.get(\"http://localhost:8080/api/posts/category/\" + category)\n\t    .then( response => {\n\t    \tthis.props.gotPosts(response.data);\n\t    })\n\t    .catch(err => {\n\t    \tconsole.log(\"Error Fetching Posts:\");\n\t    \tconsole.log(err);\n\t    }); */\n\t}\n\n\trender() {\n\t\treturn  (\n\t\t\t<div>\n\t\t\t\t<h2>News Articles</h2>\n\t\t\t\t{/* HERE is where to conditionally show plus to add new post */}\n\t\t\t\t<ItemList show_category={true} items={this.props.posts} />\n\t\t\t</div>\n\t\t);\n\t}\n}\nlet mstp = state => {\n\treturn {posts:state.posts};\n}\nlet mdtp = dispatch => ({\n\tgotPosts: (posts) => dispatch(gotPostsAction(posts))\n})\nexport default connect(mstp, mdtp)(Category);\n","import React from 'react';\nimport gotPostsAction from './actions/gotPostsAction';\nimport {connect} from 'react-redux';\nimport ItemList from './ItemList';\nimport sortHeadlines from './util/sortHeadlines';\n\nclass UserPage extends React.Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {postsAndUserSubmissions:null}\n\t}\n\t/* \n\tTODO this is roundabout fuckery\n\tfirst get all posts WITH user subs\n\tretrieve each individually\n\tfilter subs to target user & display\n\tthis is garbage\n\t*/ \n\tcomponentDidMount() {\n\t\tlet user = this.props.match.params.user;\n\t\tthis.props.firebase.getSubmissionsByUser(user)\n\t\t.then(res => res.val())\n\t\t.then(posts => {\n\t\t\tconsole.log(posts);\n\n\t\t\tif (!posts || !posts.stories) return;\n\n\t\t\tlet storiesWithUserSubs = posts.stories;\n\t\t\tlet story_keys = Object.keys(storiesWithUserSubs);\n\n\t\t\tlet subPromises = story_keys.map(key => {\n\t\t\t\tlet subs = Object.keys(storiesWithUserSubs[key].submissions);\n\t\t\t\treturn subs.map(subID => key + \"/\" + subID);\n\t\t\t})\n\t\t\t.flat()\n\t\t\t.map(k=>this.props.firebase.getStorySubmissionByID(k));\n\n\t\t\tPromise.all(subPromises)\n\t\t\t.then(res => res.map(sub=>{\n\t\t\t\tlet path = sub.ref.path.toString().split('/');\n\t\t\t\tlet storyID = path[path.length-2];\n\t\t\t\treturn [storyID, sub.val()];\n\t\t\t}))\n\t\t\t.then(submissions=>{\n\t\t\t\tlet stories = {};\n\t\t\t\tsubmissions.forEach(sub => {\n\t\t\t\t\tif (!stories[sub[0]]) {\n\t\t\t\t\t\tstories[sub[0]] = [sub[1]];\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tstories[sub[0]].push(sub[1]);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tlet story_promises = story_keys.map(k=>this.props.firebase.getStoryByID(k))\n\t\t\t\tPromise.all(story_promises)\n\t\t\t\t.then(res=>res.map(story=>[story.key, story.val()]))\n\t\t\t\t.then(story_data=>{\n\t\t\t\t\tconsole.log(story_data);\n\t\t\t\t\tlet items = [];\n\t\t\t\t\tstory_data.forEach(story=>{\n\t\t\t\t\t\tlet key = story[0];\n\t\t\t\t\t\tlet temp = stories[key];\n\t\t\t\t\t\tstories[key] = story[1];\n\t\t\t\t\t\tstories[key].headlines = sortHeadlines(temp);\n\t\t\t\t\t\tstories[key].postID=key;\n\t\t\t\t\t\titems.push(stories[key]);\n\t\t\t\t\t})\n\t\t\t\t\tthis.setState({postsAndUserSubmissions:items});\n\t\t\t\t})\n\t\t\t});\n\t\t})\n\t}\n\n\trender() {\n\t\tif (!this.state.postsAndUserSubmissions) return <div></div>;\n\t\treturn <ItemList items={this.state.postsAndUserSubmissions} show={100}/>\n\t}\n}\nlet mstp = state => {\n\treturn {firebase:state.firebase};\n}\nlet mdtp = dispatch => ({\n\tgotPosts: (posts) => dispatch(gotPostsAction(posts))\n})\nexport default connect(mstp, mdtp)(UserPage);\n","let articles = [\n     [\"OLD First\",\"http://example.com\",\"general\"],\n     [\"OLD Second\",\"http://example.com\",\"general\"],\n     [\"OLD Third one - Fake Post\",\"http://example.com\",\"general\"],\n     [\"OLD Fourth\",\"http://example.com\",\"general\"],\n     [\"OLD fifth\",\"http://example.com\",\"general\"],\n     [\"OLD kdlfjaklsdjfalksdjf\",\"http://example.com\",\"general\"],\n     [\"OLD djsfasdf\",\"http://example.com\",\"general\"],\n     [\"OLD A News Article\",\"http://example.com\",\"general\"],\n     [\"OLD ABC!\",\"http://example.com\",\"general\"],\n     [\"OLD hello \",\"http://example.com\",\"general\"],\n     [\"OLD last one\",\"http://example.com\",\"general\"],\n];\nexport default articles;","import React from 'react';\nimport {withRouter} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport uuid from 'uuid';\nimport articles from './articles';\n\nconst isValidURL = function(str) {\n    return true;//(str.substring(0,7)==='http://' || str.substring(0,8) === 'https://' || str[0]==='#')\n}\n\nclass NewPost extends React.Component {\n\n  cancel = (e )=> {\n    e.preventDefault();\n    this.props.history.push('/news');\n  }\n  fakeVotes() {\n    console.log(\"fake votes\");\n    this.props.posts.forEach(post => {\n      console.log(post.submissions);\n      if (!post.submissions) return;\n      Object.keys(post.submissions).forEach(sub =>{\n        this.props.firebase.fakeVotes(post.postID, sub, 10);\n      });\n    });\n  }\n  \n  fakeSubs() {\n    console.log(\"fake subs\");\n    this.props.posts.forEach(post => {\n      console.log(post);\n      [1,2,3].forEach(num => this.props.firebase.newHeadline(post.postID, \"Fake Headline #\" + num));\n    });\n  }\n  \n  fake_yesterday() {\n      articles.forEach(a=>this.props.firebase.newArticle(a[0],a[1],a[2],true));\n      this.props.history.push(\"/news\");\n  }\n  fake() {\n      articles.forEach(a=>this.props.firebase.newArticle(a[0],a[1],a[2]));\n      this.props.history.push(\"/news\");\n  }\n\n  submit = (e)=> {\n    e.preventDefault();\n    if (e.target.url.value && e.target.title.value) {\n      if (!isValidURL(e.target.url.value)) {\n        //TODO handle this\n        console.log(\"invalid URL\");\n        return;\n      }\n      let [title,url,cat] = [e.target.title.value, e.target.url.value, e.target.category.value];\n      this.props.firebase.newArticle(title,url,cat);\n      this.props.history.push(\"/news\");\n    }\n    else {\n      //tell the user to fill out the form properly\n    }\n  }\n\n  render() {\n      if (!this.props.user) {\n        this.props.history.push('/login');\n        return null;\n      }\n      var selector;\n\n      //if props.params has a specific category to default to:\n      if (this.props.params && this.props.params.category) {\n        selector = (\n            <select name='category'>\n              <option value={this.props.params.category}>\n                {this.props.params.category}\n              </option>\n              {\n                this.props.categories\n                .filter(name => name !== this.props.params.category)\n                .map(name => <option key={uuid.v4()} value={name}>{name} </option>)\n              }\n            </select>\n          )\n      }\n\n      //if no specific category - order is the default from [categories]\n      else {\n        selector = (\n          <select name='category'>\n                {this.props.categories.map(name => \n                  <option key={uuid.v4()} value={name}>{name}</option>\n                  )}\n          </select>\n        )\n      }\n\n      return (\n        <div className='new-post'>\n          <h2>Submit a New Arcticle</h2>\n          <form autoComplete='off' action='' onSubmit = {this.submit}>\n            <fieldset className='form-group wrap'>\n              <div className='input-name'>\n                Title\n              </div>\n              <textarea className='form-control' autoFocus={true} name='title' placeholder='title' />\n              <div className='byline'>\n                Enter the original title of the article\n              </div>\n            </fieldset>\n        \n            <fieldset className='form-group wrap'>\n              <div className='input-name'>\n               URL\n              </div>\n              <textarea className='form-control' name='url' placeholder='URL' />\n              <div className='byline'>\n                Please submit a link to a valid news source\n              </div>\n            </fieldset>\n            <fieldset className='form-group wrap'>\n              <div className='input-name'>\n              Article Category\n              </div>\n              {selector}\n            </fieldset>\n            <div className = 'new-post-buttons'>\n              <button type='submit'>Submit</button>\n              <button onClick={this.cancel}>Cancel</button>\n            </div>\n          </form>\n        </div>\n      )\n  }\n}\n\nconst MapStateToProps = state => ({posts:state.posts, categories:state.categories, user:state.user, firebase:state.firebase});\n\nexport default withRouter(connect(MapStateToProps)(NewPost));\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport Item from './Item';\nimport sortHeadlines from './util/sortHeadlines';\nclass Detail extends React.Component {\n\t/*\n\tFetch all for this.props.match.params.postID from server\n\tDisplay expanded version of Item\n\t*/\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {item:null}\n\t}\n\tcomponentDidMount() {\n\t\tlet storyID = this.props.match.params.postID;\n\t\tPromise.all(\n\t\t\t[this.props.firebase.getSubmissionsForPost(storyID,100),\n\t\t\tthis.props.firebase.getStoryByID(storyID)]\n\t\t)\n\t\t.then(res=>{\n\t\t\tlet subs = res[0].val();\n\t\t\tlet story = res[1].val();\n\t\t\tif (subs) {\n\t\t\t\tstory.headlines=sortHeadlines(subs);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tstory.headlines = [];\n\t\t\t}\n\t\t\tconsole.log(story);\n\t\t\tthis.setState({item:story});\n\t\t})\n\t}\n\trender() {\n\t\tif (!this.state.item) return <div>hi</div>;\n\t\tlet item = this.state.item;\n\t\treturn <ul>\n\t\t\t<Item \n            postID = {this.props.match.params.postID}\n            category={item.category} \n            orTitle={item.title} \n            timestamp={item.timestamp}\n            headlines={item.headlines}\n            show={100}\n            url={item.url} \n\t        />\n\t     </ul>;\n\t}\n}\nlet mstp = state => {\n\treturn {\n\t\tfirebase:state.firebase\n\t};\n}\nexport default connect(mstp)(Detail);","import React from 'react';\nimport uuid from 'uuid';\n\n\nclass AdminVerifyStory extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {url:props.guess_url,title:props.guess_text};\n\t}\n\n\n\tchange(event) {\n\t\tthis.setState({[event.target.name]:event.target.value});\n\t}\n\n\trender() {\n      return (\n        <div className='adminPanel'>\n          <form autoComplete='off' action=''>\n\n            <fieldset className={'form-group wrap ' + this.props.status}>\n              <div className='input-name'>\n              \t<h2>{this.props.full}</h2>\n              </div>\n              <textarea \n              \tspellCheck={false}\n              \tvalue={this.state.title} \n              \tonChange={this.change.bind(this)} \n              \tclassName='adminPanel' \n              \tname='title'/>\n              <textarea \n              \tspellCheck={false}\n              \tclassName='adminPanel' \n              \tvalue={this.state.url} \n              \tonChange={this.change.bind(this)} \n              \tname='url' />\n            </fieldset>\n            <div className = 'new-post-buttons'>\n\t\t\t<button onClick={(ev)=> {ev.preventDefault();this.props.cancel(); } }>\n\t\t\t\tCancel\n\t\t\t</button>\n              {\n              \tthis.props.categories.map( category => \n              \t\t<button \n              \t\t\tkey={uuid.v4()} \n              \t\t\ttype=\"button\" \n              \t\t\tonClick={(ev)=>{\n              \t\t\t\tev.preventDefault();\n              \t\t\t\tthis.props.save(category,this.state.url,this.state.title)\n              \t\t\t}}\n\t           \t\t\t>\n              \t\t\t{category}\n              \t\t</button> )\n              }\n            </div>\n          </form>\n        </div>\n        );\n\t}\n}\n\nexport default AdminVerifyStory;","import React from 'react';\nimport {withRouter} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport uuid from 'uuid';\nimport AdminVerifyStory from './AdminVerifyStory';\n\nlet Status = {NONE:\"bg1\",SELECTED:\"bg2\",REJECTED:\"bg3\"};\n\n\nlet TweetPreview = (props) =>\n     (\n      <div className=\"tweetpreview\">\n        <p><strong>{props.tweet.cat}</strong></p>\n        <p>{props.tweet.title}</p>\n        <p><a href={props.tweet.url}>{props.tweet.url}</a></p>\n      </div>\n      );\n\nclass AdminPanel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {handle: \"\", tweets:null, to_submit:[], submitting: false};\n  }\n\n\n  fetchTweets(handle, num) {\n    let score = (tweet) => tweet.favorite_count;\n    this.props.firebase.getRecentTweets(handle, num)\n    .then(result=>result.data)\n    .then(tweets=>tweets.sort( (t1,t2)=>score(t2)-score(t1)) )\n    .then(tweets=>{\n      tweets.forEach(tweet=>{\n        tweet.status=Status.NONE;\n        tweet.id=uuid.v4();\n      });\n      this.setState({tweets:tweets});\n    });\n  }\n  fetchCustomTweets(event) {\n    event.preventDefault();\n    this.fetchTweets(this.state.handle, 50);\n  }\n\n  handleChange(event) {\n    this.setState({handle:event.target.value});\n  }\n  cancel(id) {\n    let tweets = this.state.tweets;\n    tweets = tweets.slice(); \n    tweets.forEach(t=>{\n      if (t.id===id) {\n        t.status = Status.REJECTED;\n      }\n    })\n    this.setState({tweets : tweets});\n  }\n\n  save(id, cat, url, title) {\n\n    let tweets = this.state.tweets;\n    tweets = tweets.slice(); \n    tweets.forEach(t=>{\n      if (t.id===id) {\n        t.url=url;\n        t.title=title;\n        t.cat=cat;\n        t.status = Status.SELECTED;\n      }\n    })\n    this.setState({tweets : tweets});\n  }\n\n  submit(e) {\n    e.preventDefault();\n    this.state.tweets.forEach(tweet => {\n      if (tweet.status===Status.SELECTED) {\n        this.props.firebase.newArticle(tweet.title, tweet.url, tweet.cat, false)\n        .then(res=>this.props.history.push(\"/news\"));\n      }\n    });\n  }\n  show(e) {\n    this.setState({submitting: !this.state.submitting})\n  }\n\n  killDB() {\n    this.props.firebase.clearToday()\n    .then(res=>{\n      this.props.history.push('/news');\n    })\n  }\n  render() {\n      let categories = [ \n        \"general\",\"sports\",\"politics\"\n      ];\n      if (this.state.submitting) {\n        return (\n          <div>\n            <button style={{margin:\"10px\"}} onClick={()=>this.props.history.push('/news')}>Cancel</button>\n            <button onClick={this.submit.bind(this)}>submit</button>\n            <button onClick={this.show.bind(this)}>edit</button>\n            {\n              this.state.tweets.filter(tweet=>tweet.status===Status.SELECTED)\n              .map(tweet=> <TweetPreview tweet={tweet} key={uuid.v4()} />)\n            }\n          </div>)\n      }\n      else if (this.state.tweets) {\n        return (\n        <div> \n          <button style={{margin:\"10px\"}} onClick={()=>this.props.history.push('/news')}>Cancel</button>\n          <button style={{margin:\"10px\"}} onClick={()=>this.setState({tweets:null})}>Clear</button>\n          <button onClick={this.show.bind(this)}>show selections</button>\n          <button onClick={this.killDB.bind(this)}>kill database</button>\n          {this.state.tweets.map(tweet =>\n            <AdminVerifyStory \n                categories={categories} \n                full={tweet.full_text} \n                guess_url = {tweet.guess_url}\n                guess_text = {tweet.guess_text}\n                status={tweet.status}\n                save={this.save.bind(this, tweet.id)} \n                cancel = {this.cancel.bind(this, tweet.id)} \n                key={tweet.id} />)\n            }\n            </div>\n          );\n      }\n      else {\n        return (\n        <div>\n\n\n          <form onSubmit={this.fetchCustomTweets.bind(this)}>\n            <button style={{margin:\"10px\"}} onClick={()=>this.props.history.push('/news')}>Cancel</button>\n            <button type=\"button\" style={{margin:\"10px\"}} onClick={()=>this.fetchTweets(\"ap\",50)}>Fetch AP Tweets</button>\n            <button type=\"button\" style={{margin:\"10px\"}} onClick={()=>this.fetchTweets(\"abc\",50)}>Fetch ABC News Tweets</button>\n\n            <input type='text' placeholder=\"@handle\" value={this.state.handle} onChange={this.handleChange.bind(this)} />\n            <button type='submit'>Fetch Custom Tweets</button>\n\n          </form>\n\n          <button style={{margin:\"10px\"}} onClick={this.killDB.bind(this)}>kill database</button>\n        </div> );\n      }\n  }\n}\n\nconst MapStateToProps = state => ({posts:state.posts, categories:state.categories, user:state.user, firebase:state.firebase});\n\nexport default withRouter(connect(MapStateToProps)(AdminPanel));\n","import React from 'react';\nimport {Link, Route} from 'react-router-dom';\nimport Landing from './Landing';\nimport Login from './Login';\nimport Signup from './Signup';\nimport {connect} from 'react-redux';\nimport NewsHome from './NewsHome';\nimport Newspaper from './Newspaper';\nimport Category from './Category';\nimport UserPage from './UserPage';\nimport NewPost from './NewPost';\nimport Detail from './Detail';\nimport AdminPanel from './AdminPanel';\n\nfunction TopBar(props) {\n\twindow.u=props.user;\n\tlet logOut = ()=>{\n\t\tprops.firebase.logOut();\n\t\tprops.doLogout();\n\t};\n\treturn (\n\t\t\t<div className=\"top\">\n\t\t        <nav className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n\t\t        \t<ul className=\"nav navbar-nav\">\n\t\t        \t\t<li>\n\t\t\t\t\t\t\t<Link to={'/'}>\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\">Home</button>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link to={'/news'}>\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\">News</button>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t{ false &&\n\t\t\t\t\t\t\t<Link to={'/newspaper'}>\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\">The Paper</button>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{ props.user? \n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<Link to={'/user/' + props.uid}>\n\t\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\">Profile</button>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</li>  \n\t\t\t\t\t\t : \n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<Link to={'/login'}>\n\t\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\">Log In</button>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t}\n\t\t\t\t\t</ul>\n\t\t        \t<ul className=\"nav navbar-nav ml-auto\">\n\t\t        \t\t{props.user &&  <li><span className=\"navbar-text\">{props.user.displayName || \"anonymous\"}</span></li>}\n\t\t        \t\t{ props.user? \n\t\t\t        \t\t<li>\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary float-right\" onClick={logOut}>Log Out</button>\n\t\t\t        \t\t</li>\n\t\t\t        \t : \n\t\t\t        \t\t<li>\n\t\t\t\t\t\t\t\t<Link to={'/signup'}>\n\t\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\">Sign Up</button>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t        \t\t</li>\n\t\t\t        \t}\n\t\t\t\t\t</ul>\n\t\t\t\t</nav>\n\t\t\t\t<Route exact path='/' component = {Landing} />\n\t\t\t\t<Route path='/news' component = {NewsHome} />\n\t\t\t\t<Route path='/newspaper' component = {Newspaper} />\n\t\t\t\t<Route path='/login' component = {Login} />\n\t\t\t\t<Route path='/signup' component = {Signup} />\n\t\t\t\t<Route path='/detail/:postID' component = {Detail} />\n\t\t\t\t<Route path='/category/:category' component = {Category} />\n\t\t\t\t<Route path='/user/:user' component = {UserPage} />\n\t\t\t\t<Route path='/new' component = {NewPost} />\n\t\t\t\t<Route path='/admin' component = {AdminPanel} />\n\t\t\t</div>\n\t\t);\n}\n\nfunction mstp(state, ownProps) {\n\treturn {\n\t\tfirebase:state.firebase, \n\t\tuser: state.user,\n\t\tuid:state.user?state.user.uid:null};\n}\nfunction mdtp(disp) {\n\treturn {\n\t\tdoLogout: ()=>disp({type:'LOGOUT_ACTION'})\n\t}\n}\nexport default connect(mstp,mdtp)(TopBar);\n\n\n","import React from 'react';\nimport {BrowserRouter as Router} from 'react-router-dom';\n//import logo from './logo.svg';\nimport './App.css';\nimport TopBar from './TopBar';\n\nclass App extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<Router>\n\t\t\t\t<TopBar/>\n\t\t\t</Router>\n\t\t);\n\t}\n}\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\nimport configureStore from './store';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nReactDOM.render(\n\t\t\t<Provider store={configureStore}>\n\t\t\t\t<App/>\n\t\t\t</Provider>,\n\tdocument.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}